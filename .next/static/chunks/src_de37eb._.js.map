{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/okero/Desktop/GITHUB/CurrentWeb/src/config/firebase-configs.js"],"sourcesContent":["// src/config/firebase-configs.js\r\n\r\n// Firebase configuration สำหรับ Cafe Amazon (Default)\r\nexport const CAFE_FIREBASE_CONFIG = {\r\n    apiKey: \"AIzaSyBqd5rgKGkO7h_Dn76ctkITkgkrvnV5tbE\",\r\n    authDomain: \"ultrafine-particles.firebaseapp.com\",\r\n    databaseURL: \"https://ultrafine-particles-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n    projectId: \"ultrafine-particles\",\r\n    storageBucket: \"ultrafine-particles.firebasestorage.app\",\r\n    messagingSenderId: \"231538011955\",\r\n    appId: \"1:231538011955:web:274e36a3c702324dc31846\",\r\n    measurementId: \"G-KBQLGTKY0V\"\r\n};\r\n\r\n// Firebase configuration สำหรับ อาคารวิชาการ 4 (ใช้เดียวกับ Cafe)\r\nexport const C4_FIREBASE_CONFIG = {\r\n    apiKey: \"AIzaSyBqd5rgKGkO7h_Dn76ctkITkgkrvnV5tbE\",\r\n    authDomain: \"ultrafine-particles.firebaseapp.com\",\r\n    databaseURL: \"https://ultrafine-particles-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n    projectId: \"ultrafine-particles\",\r\n    storageBucket: \"ultrafine-particles.firebasestorage.app\",\r\n    messagingSenderId: \"231538011955\",\r\n    appId: \"1:231538011955:web:274e36a3c702324dc31846\",\r\n    measurementId: \"G-KBQLGTKY0V\"\r\n};\r\n\r\n// Location data mapping\r\nexport const LOCATION_CONFIGS = {\r\n    'cafe-amazon-st': {\r\n        id: 'cafe-amazon-st',\r\n        name: 'Cafe Amazon สาขา ST',\r\n        coords: [8.64437496101933, 99.89929488155569],\r\n        firebaseConfig: CAFE_FIREBASE_CONFIG,\r\n        dataSource: 'testing', // ประเภทข้อมูลหลัก\r\n        pieraUserId: 'gdRueJtWeNaMleXbEf4rWfuD6Kr1',\r\n        pieraPath: '', // ไม่มี sub-path (ใช้ root)\r\n        testingPath: 'Cafe',      // <--- เพิ่ม path สำหรับ Testing (PC0.1)\r\n        rawDataPath: 'Cafe',      // <--- เพิ่ม path สำหรับ RAWdata (PM2.5, PM10)\r\n    },\r\n    'building-c4': {\r\n        id: 'building-c4',\r\n        name: 'อาคารวิชาการ 4',\r\n        coords: [8.638222, 99.897976],\r\n        firebaseConfig: C4_FIREBASE_CONFIG,\r\n        // C4 ใช้ RAWdata สำหรับทั้ง PM และ อุณหภูมิ/ความชื้น\r\n        dataSource: 'raw', // ประเภทข้อมูล\r\n        pieraUserId: null, // ไม่ใช้ Piera\r\n        pieraPath: null,\r\n        testingPath: 'Lab', // ใช้ Testing/Lab สำหรับทุกอย่าง\r\n        rawDataPath: 'Lab' // ใช้ RAWdata/Lab สำหรับทุกอย่าง\r\n    }\r\n};"],"names":[],"mappings":"AAAA,iCAAiC;AAEjC,sDAAsD;;;;;;AAC/C,MAAM,uBAAuB;IAChC,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACnB;AAGO,MAAM,qBAAqB;IAC9B,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACnB;AAGO,MAAM,mBAAmB;IAC5B,kBAAkB;QACd,IAAI;QACJ,MAAM;QACN,QAAQ;YAAC;YAAkB;SAAkB;QAC7C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,WAAW;QACX,aAAa;QACb,aAAa;IACjB;IACA,eAAe;QACX,IAAI;QACJ,MAAM;QACN,QAAQ;YAAC;YAAU;SAAU;QAC7B,gBAAgB;QAChB,qDAAqD;QACrD,YAAY;QACZ,aAAa;QACb,WAAW;QACX,aAAa;QACb,aAAa,MAAM,iCAAiC;IACxD;AACJ"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/okero/Desktop/GITHUB/CurrentWeb/src/data/monitoring-data.js"],"sourcesContent":["'use client'\r\n\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getDatabase, ref, onValue, query, orderByKey, limitToLast } from 'firebase/database';\r\nimport { useState, useEffect } from 'react';\r\nimport { LOCATION_CONFIGS } from '../config/firebase-configs';\r\n\r\n// ===================================================================\r\n// Firebase Configuration และ Constants\r\n// ===================================================================\r\n\r\n// ใช้ Firebase configuration จาก config file\r\nconst firebaseConfig = LOCATION_CONFIGS['cafe-amazon-st'].firebaseConfig || LOCATION_CONFIGS['building-c4']?.firebaseConfig;\r\n\r\n// Initialize Firebase - เพิ่มการตรวจสอบ config\r\nif (!firebaseConfig) {\r\n  console.error('Firebase configuration not found in LOCATION_CONFIGS');\r\n}\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst database = getDatabase(app);\r\n\r\n// Constants สำหรับ Firebase paths\r\nconst FIREBASE_USER_ID = 'gdRueJtWeNaMleXbEf4rWfuD6Kr1';\r\nconst PIERA_PATH = 'Piera/';\r\nconst RAW_PATH = 'RAWdata/';\r\nconst TESTING_PATH = 'Testing/';\r\n\r\n// ===================================================================\r\n// Helper Functions สำหรับการจัดการเวลาและการแสดงผล\r\n// ===================================================================\r\n\r\nconst getCurrentDatePath = () => {\r\n  const date = new Date();\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n  const day = date.getDate().toString().padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\nconst getCurrentTime = () => {\r\n  const date = new Date();\r\n  const hours = date.getHours().toString().padStart(2, '0');\r\n  const minutes = date.getMinutes().toString().padStart(2, '0');\r\n  const seconds = date.getSeconds().toString().padStart(2, '0');\r\n  return `${hours}:${minutes}:${seconds}`;\r\n};\r\n\r\nconst formatDisplayDate = (date) => {\r\n  const targetDate = date || new Date();\r\n  const month = (targetDate.getMonth() + 1).toString().padStart(2, '0');\r\n  const day = targetDate.getDate().toString().padStart(2, '0');\r\n  const year = targetDate.getFullYear();\r\n  return `${month}/${day}/${year}`;\r\n};\r\n\r\n// ===================================================================\r\n// Utility Functions สำหรับการจัดการข้อมูลอย่างปลอดภัย\r\n// ===================================================================\r\n\r\n// ฟังก์ชันสำหรับแปลงค่าให้เป็นตัวเลขอย่างปลอดภัย\r\nconst safeParse = (value, defaultValue = 0) => {\r\n  if (value === null || value === undefined || value === '') {\r\n    return defaultValue;\r\n  }\r\n\r\n  const parsed = parseFloat(value);\r\n  return isNaN(parsed) ? defaultValue : parsed;\r\n};\r\n\r\n// ฟังก์ชันสำหรับตรวจสอบว่าข้อมูลมีค่าที่มีประโยชน์หรือไม่\r\nconst hasValidData = (data) => {\r\n  if (!data || typeof data !== 'object') {\r\n    return false;\r\n  }\r\n\r\n  // ตรวจสอบว่ามีค่า PM อย่างน้อยหนึ่งค่าที่มีค่ามากกว่า 0\r\n  const pc01 = safeParse(data.PC01 || data.pc01);\r\n  const pm01 = safeParse(data.PM01 || data.pm01);\r\n  const pm25 = safeParse(data.PM25 || data.pm25 || data.PM);\r\n  const pm10 = safeParse(data.PM10 || data.pm10 || data.PM100);\r\n\r\n  return pc01 > 0 || pm01 > 0 || pm25 > 0 || pm10 > 0;\r\n};\r\n\r\n// ===================================================================\r\n// Export Functions ที่ต้องใช้ใน component หลัก\r\n// ===================================================================\r\n\r\nexport const getAirQualityColor = (status) => {\r\n  const colors = {\r\n    'Good': '#2DC653',\r\n    'Warning': '#FECF3E',\r\n    'Affects health': '#FF9500',\r\n    'Danger': '#D02224',\r\n    'Hazardous': '#973AA8',\r\n  };\r\n  return colors[status] || colors['Good'];\r\n};\r\n\r\nexport const formatPMValue = (value) => {\r\n  const numericValue = parseFloat(value);\r\n  if (isNaN(numericValue)) return value;\r\n  return `${numericValue.toFixed(2)} μg/m³`;\r\n};\r\n\r\nexport const formatPCValue = (value) => {\r\n  const numericValue = parseFloat(value);\r\n  if (isNaN(numericValue)) return value;\r\n  return `${numericValue.toFixed(0)} PNC`;\r\n};\r\n\r\n// PM thresholds สำหรับการประเมินคุณภาพอากาศ\r\nexport const PM_THRESHOLDS = {\r\n  PC01: {\r\n    Good: 258,\r\n    Warning: 543,\r\n    'Affects health': 3616,\r\n    Danger: 6271,\r\n    Hazardous: Number.MAX_VALUE\r\n  },\r\n  PM01: {\r\n    Good: 0.6,\r\n    Warning: 0.9,\r\n    'Affects health': 1.1,\r\n    Danger: 1.6,\r\n    Hazardous: Number.MAX_VALUE\r\n  },\r\n  PM: {\r\n    Good: 15.0,\r\n    Warning: 37.5,\r\n    'Affects health': 75.0,\r\n    Danger: 150.0,\r\n    Hazardous: Number.MAX_VALUE\r\n  }\r\n};\r\n\r\n// ฟังก์ชันสำหรับคำนวณสถานะคุณภาพอากาศ - ปรับปรุงให้แข็งแกร่งขึ้น\r\nexport const determineAirQuality = (pc01, pm01, pm25, pm10) => {\r\n  try {\r\n    // แปลงค่าทั้งหมดให้เป็นตัวเลขอย่างปลอดภัย\r\n    const pc01Val = safeParse(pc01);\r\n    const pm01Val = safeParse(pm01);\r\n    const pm25Val = safeParse(pm25);\r\n    const pm10Val = safeParse(pm10);\r\n\r\n    // ใช้ threshold เดียวกันสำหรับ pm25 และ pm10 โดยใช้ OR logic\r\n    if (\r\n      pc01Val <= PM_THRESHOLDS.PC01.Good ||\r\n      pm01Val <= PM_THRESHOLDS.PM01.Good ||\r\n      pm25Val <= PM_THRESHOLDS.PM.Good ||\r\n      pm10Val <= PM_THRESHOLDS.PM.Good\r\n    ) {\r\n      return \"Good\";\r\n    } else if (\r\n      pc01Val <= PM_THRESHOLDS.PC01.Warning ||\r\n      pm01Val <= PM_THRESHOLDS.PM01.Warning ||\r\n      pm25Val <= PM_THRESHOLDS.PM.Warning ||\r\n      pm10Val <= PM_THRESHOLDS.PM.Warning\r\n    ) {\r\n      return \"Warning\";\r\n    } else if (\r\n      pc01Val <= PM_THRESHOLDS.PC01['Affects health'] ||\r\n      pm01Val <= PM_THRESHOLDS.PM01['Affects health'] ||\r\n      pm25Val <= PM_THRESHOLDS.PM['Affects health'] ||\r\n      pm10Val <= PM_THRESHOLDS.PM['Affects health']\r\n    ) {\r\n      return \"Affects health\";\r\n    } else if (\r\n      pc01Val <= PM_THRESHOLDS.PC01.Danger ||\r\n      pm01Val <= PM_THRESHOLDS.PM01.Danger ||\r\n      pm25Val <= PM_THRESHOLDS.PM.Danger ||\r\n      pm10Val <= PM_THRESHOLDS.PM.Danger\r\n    ) {\r\n      return \"Danger\";\r\n    } else {\r\n      return \"Hazardous\";\r\n    }\r\n  } catch (error) {\r\n    console.error('Error in determineAirQuality:', error);\r\n    return \"Good\"; // ค่า default หากเกิด error\r\n  }\r\n};\r\n\r\n// ===================================================================\r\n// ฟังก์ชันสำหรับการสร้างข้อมูลที่ปลอดภัยและครบถ้วน - ปรับปรุงใหม่\r\n// ===================================================================\r\n\r\nconst transformToComponentFormat = (data, locationName, dataSource = 'testing') => {\r\n  // ตรวจสอบข้อมูลเบื้องต้น\r\n  if (!data || typeof data !== 'object') {\r\n    console.warn('Invalid data received in transformToComponentFormat:', data);\r\n    return createFallbackData(locationName, dataSource);\r\n  }\r\n\r\n  try {\r\n    // ดึงค่าต่างๆ จากข้อมูลที่ได้รับ โดยใช้ safeParse\r\n    const pc01 = safeParse(data.pc01 || data.PC01 || data['PC01']);\r\n    const pm01 = safeParse(data.pm01 || data.PM01);\r\n    const pm25 = safeParse(data.pm25 || data.PM25 || data.PM);\r\n    const pm10 = safeParse(data.pm10 || data.PM10 || data.PM100);\r\n\r\n    // ดึงข้อมูลสภาพแวดล้อม\r\n    const temperature = safeParse(data.temperature || data.IndoorTemperature, 25.5);\r\n    const humidity = safeParse(data.humidity || data.IndoorHumidity, 65);\r\n\r\n    // คำนวณสถานะคุณภาพอากาศ\r\n    const status = determineAirQuality(pc01, pm01, pm25, pm10);\r\n    const recommendations = getGeneralRecommendations(status);\r\n\r\n    // สร้างข้อมูลในรูปแบบที่ component หลักต้องการ\r\n    const transformedData = {\r\n      date: formatDisplayDate(new Date()),\r\n      time: data.timestamp || getCurrentTime(),\r\n      location: locationName || 'Unknown Location',\r\n\r\n      // ส่วนสำคัญ - mainReading ต้องมีครบทุก property\r\n      mainReading: {\r\n        type: dataSource === 'testing' ? 'PC0.1' : 'PM0.1',\r\n        value: dataSource === 'testing' ? pc01 : pm01,\r\n        unit: dataSource === 'testing' ? 'PNC' : 'μg/m³',\r\n        status: status // นี่คือส่วนที่สำคัญที่ต้องมีเสมอ\r\n      },\r\n\r\n      conditions: {\r\n        temperature: `${temperature}°C`,\r\n        humidity: `${humidity}%`\r\n      },\r\n\r\n      // สร้าง pmReadings ในรูปแบบที่ component คาดหวัง\r\n      pmReadings: [\r\n        {\r\n          type: 'PC01',\r\n          value: pc01,\r\n          unit: 'PNC'\r\n        },\r\n        {\r\n          type: 'PM0.1',\r\n          value: pm01,\r\n          unit: 'μg/m³'\r\n        },\r\n        {\r\n          type: 'PM2.5',\r\n          value: pm25,\r\n          unit: 'μg/m³'\r\n        },\r\n        {\r\n          type: 'PM10',\r\n          value: pm10,\r\n          unit: 'μg/m³'\r\n        }\r\n      ],\r\n\r\n      recommendations: recommendations,\r\n\r\n      // ข้อมูลเมตาเพื่อการ debug\r\n      _rawData: data,\r\n      _dataSource: dataSource,\r\n      _isValid: hasValidData(data)\r\n    };\r\n\r\n    // Debug logging\r\n    console.log('=== TRANSFORMED DATA ===');\r\n    console.log('Location:', locationName);\r\n    console.log('Data Source:', dataSource);\r\n    console.log('Main Reading:', transformedData.mainReading);\r\n    console.log('PM Readings:', transformedData.pmReadings);\r\n    console.log('Status:', status);\r\n    console.log('Is Valid Data:', hasValidData(data));\r\n    console.log('========================');\r\n\r\n    return transformedData;\r\n\r\n  } catch (error) {\r\n    console.error('Error in transformToComponentFormat:', error);\r\n    return createFallbackData(locationName, dataSource);\r\n  }\r\n};\r\n\r\n// ฟังก์ชันสำหรับสร้างข้อมูล fallback เมื่อไม่มีข้อมูลจริง\r\nconst createFallbackData = (locationName, dataSource = 'testing') => {\r\n  const fallbackData = {\r\n    date: formatDisplayDate(new Date()),\r\n    time: getCurrentTime(),\r\n    location: locationName || 'กำลังโหลด...',\r\n\r\n    mainReading: {\r\n      type: dataSource === 'testing' ? 'PC0.1' : 'PM0.1',\r\n      value: 0,\r\n      unit: dataSource === 'testing' ? 'PNC' : 'μg/m³',\r\n      status: 'Good'\r\n    },\r\n\r\n    conditions: {\r\n      temperature: '25.5°C',\r\n      humidity: '65%'\r\n    },\r\n\r\n    pmReadings: [\r\n      { type: 'PC01', value: 0, unit: 'PNC' },\r\n      { type: 'PM0.1', value: 0, unit: 'μg/m³' },\r\n      { type: 'PM2.5', value: 0, unit: 'μg/m³' },\r\n      { type: 'PM10', value: 0, unit: 'μg/m³' }\r\n    ],\r\n\r\n    recommendations: [\r\n      'กำลังโหลดข้อมูล...',\r\n      'กำลังเชื่อมต่อกับ Firebase...',\r\n      'โปรดรอสักครู่...'\r\n    ],\r\n\r\n    _rawData: null,\r\n    _dataSource: dataSource,\r\n    _isValid: false,\r\n    _isFallback: true\r\n  };\r\n\r\n  console.log('Created fallback data for:', locationName);\r\n  return fallbackData;\r\n};\r\n\r\n// ===================================================================\r\n// Hook Functions - ปรับปรุงให้มีความเสถียรมากขึ้น\r\n// ===================================================================\r\n\r\nexport const useMonitoringData = () => {\r\n  return useLocationMonitoringData({\r\n    id: 'cafe-amazon-st',\r\n    name: 'Cafe Amazon สาขา ST',\r\n    dataSource: 'testing',\r\n    pieraUserId: 'gdRueJtWeNaMleXbEf4rWfuD6Kr1',\r\n    pieraPath: '',\r\n    rawDataPath: 'Cafe',\r\n    testingPath: 'Cafe'\r\n  });\r\n};\r\n\r\nexport const useLocationMonitoringData = (locationData) => {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // ตรวจสอบข้อมูลเบื้องต้น\r\n    if (!locationData || (!locationData.rawDataPath && !locationData.testingPath)) {\r\n      console.error('Missing locationData or paths:', locationData);\r\n      setError('ข้อมูลตำแหน่งไม่ครบถ้วน');\r\n      setData(createFallbackData(locationData?.name));\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // เริ่มต้นการโหลดข้อมูล\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const datePath = getCurrentDatePath();\r\n    const dataSource = locationData.dataSource || 'testing';\r\n\r\n    console.log('=== FIREBASE QUERY SETUP ===');\r\n    console.log('Location:', locationData.name);\r\n    console.log('Data Source:', dataSource);\r\n    console.log('Date Path:', datePath);\r\n\r\n    if (dataSource === 'testing') {\r\n      // ดึง PC0.1\r\n      const testingFirebasePath = `/Testing/${locationData.testingPath}/${datePath}`;\r\n      // ดึง PM2.5, PM10\r\n      const rawFirebasePath = `/RAWdata/${locationData.rawDataPath}/${datePath}`;\r\n\r\n      console.log('Testing path:', testingFirebasePath);\r\n      console.log('RAW path:', rawFirebasePath);\r\n\r\n      // ใช้ state object เพื่อเก็บข้อมูลจากทั้งสอง source\r\n      let dataCollector = {\r\n        testing: null,\r\n        raw: null,\r\n        testingReceived: false,\r\n        rawReceived: false\r\n      };\r\n\r\n      // ฟังก์ชันสำหรับรวมข้อมูลและอัพเดท state - ปรับปรุงให้ปลอดภัยขึ้น\r\n      const updateCombinedData = () => {\r\n        // รอให้ได้รับข้อมูลจากอย่างน้อยหนึ่ง source\r\n        if (!dataCollector.testingReceived && !dataCollector.rawReceived) {\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const combinedData = {\r\n            ...dataCollector.testing,\r\n            ...dataCollector.raw\r\n          };\r\n\r\n          // ตรวจสอบว่ามีข้อมูลที่ใช้งานได้หรือไม่\r\n          if (hasValidData(combinedData) || dataCollector.testingReceived) {\r\n            const transformedData = transformToComponentFormat(\r\n              combinedData,\r\n              locationData.name,\r\n              dataSource\r\n            );\r\n            setData(transformedData);\r\n            setError(null);\r\n          } else {\r\n            // หากไม่มีข้อมูลที่ใช้งานได้ ให้สร้าง fallback data\r\n            const fallbackData = createFallbackData(locationData.name, dataSource);\r\n            setData(fallbackData);\r\n            setError('ไม่พบข้อมูลที่ใช้งานได้');\r\n          }\r\n\r\n          setLoading(false);\r\n        } catch (error) {\r\n          console.error('Error in updateCombinedData:', error);\r\n          setData(createFallbackData(locationData.name, dataSource));\r\n          setError('เกิดข้อผิดพลาดในการประมวลผลข้อมูล');\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      // Query สำหรับ Testing data\r\n      const testingQuery = query(\r\n        ref(database, testingFirebasePath),\r\n        orderByKey(),\r\n        limitToLast(1)\r\n      );\r\n\r\n      const testingUnsubscribe = onValue(testingQuery, (snapshot) => {\r\n        try {\r\n          const timeData = snapshot.val();\r\n          console.log('Testing data received:', timeData);\r\n\r\n          dataCollector.testingReceived = true;\r\n\r\n          if (timeData) {\r\n            const latestTime = Object.keys(timeData)[0];\r\n            dataCollector.testing = {\r\n              ...timeData[latestTime],\r\n              timestamp: latestTime\r\n            };\r\n          } else {\r\n            console.log('No Testing data found');\r\n            dataCollector.testing = {};\r\n          }\r\n\r\n          updateCombinedData();\r\n        } catch (error) {\r\n          console.error('Error processing testing data:', error);\r\n          dataCollector.testingReceived = true;\r\n          dataCollector.testing = {};\r\n          updateCombinedData();\r\n        }\r\n      }, (err) => {\r\n        console.error('Testing data error:', err);\r\n        dataCollector.testingReceived = true;\r\n        dataCollector.testing = {};\r\n        updateCombinedData();\r\n      });\r\n\r\n      // Query สำหรับ RAW data\r\n      const rawQuery = query(\r\n        ref(database, rawFirebasePath),\r\n        orderByKey(),\r\n        limitToLast(1)\r\n      );\r\n\r\n      const rawUnsubscribe = onValue(rawQuery, (snapshot) => {\r\n        try {\r\n          const timeData = snapshot.val();\r\n          console.log('RAW data received:', timeData);\r\n\r\n          dataCollector.rawReceived = true;\r\n\r\n          if (timeData) {\r\n            const allKeys = Object.keys(timeData);\r\n            const sortedKeys = allKeys.sort();\r\n            const latestTime = sortedKeys[sortedKeys.length - 1];\r\n            dataCollector.raw = {\r\n              ...timeData[latestTime],\r\n              timestamp: latestTime\r\n            };\r\n          } else {\r\n            console.log('No RAW data found');\r\n            dataCollector.raw = {};\r\n          }\r\n\r\n          updateCombinedData();\r\n        } catch (error) {\r\n          console.error('Error processing raw data:', error);\r\n          dataCollector.rawReceived = true;\r\n          dataCollector.raw = {};\r\n          updateCombinedData();\r\n        }\r\n      }, (err) => {\r\n        console.error('RAW data error:', err);\r\n        dataCollector.rawReceived = true;\r\n        dataCollector.raw = {};\r\n        updateCombinedData();\r\n      });\r\n\r\n      return () => {\r\n        testingUnsubscribe();\r\n        rawUnsubscribe();\r\n      };\r\n\r\n    } else if (dataSource === 'piera') {\r\n      // การจัดการ Piera data source\r\n      const pieraUserId = locationData.pieraUserId;\r\n      const pieraSubPath = locationData.pieraPath || '';\r\n      const pieraDataPath = pieraSubPath ?\r\n        `${PIERA_PATH}${pieraUserId}/${pieraSubPath}/${datePath}` :\r\n        `${PIERA_PATH}${pieraUserId}/${datePath}`;\r\n\r\n      console.log('Piera path:', pieraDataPath);\r\n\r\n      const pieraQuery = query(\r\n        ref(database, pieraDataPath),\r\n        orderByKey(),\r\n        limitToLast(1)\r\n      );\r\n\r\n      const pieraUnsubscribe = onValue(pieraQuery, (snapshot) => {\r\n        try {\r\n          const timeData = snapshot.val();\r\n          console.log('Piera data received:', timeData);\r\n\r\n          if (timeData) {\r\n            const latestTime = Object.keys(timeData)[0];\r\n            const pieraData = {\r\n              ...timeData[latestTime],\r\n              timestamp: latestTime\r\n            };\r\n\r\n            const transformedData = transformToComponentFormat(\r\n              pieraData,\r\n              locationData.name,\r\n              dataSource\r\n            );\r\n\r\n            setData(transformedData);\r\n            setError(null);\r\n          } else {\r\n            console.log('No Piera data found');\r\n            setData(createFallbackData(locationData.name, dataSource));\r\n            setError('ไม่พบข้อมูล Piera');\r\n          }\r\n          setLoading(false);\r\n        } catch (error) {\r\n          console.error('Error processing piera data:', error);\r\n          setData(createFallbackData(locationData.name, dataSource));\r\n          setError('เกิดข้อผิดพลาดในการประมวลผลข้อมูล Piera');\r\n          setLoading(false);\r\n        }\r\n      }, (err) => {\r\n        console.error('Piera data error:', err);\r\n        setError('เกิดข้อผิดพลาดในการดึงข้อมูล Piera');\r\n        setData(createFallbackData(locationData.name, dataSource));\r\n        setLoading(false);\r\n      });\r\n\r\n      return () => {\r\n        pieraUnsubscribe();\r\n      };\r\n\r\n    } else if (dataSource === 'raw') {\r\n      // การจัดการ RAW data source\r\n      const rawFirebasePath = `${TESTING_PATH}${locationData.rawDataPath}/${datePath}`;\r\n\r\n      console.log('RAW path for all data:', rawFirebasePath);\r\n\r\n      const rawQuery = query(\r\n        ref(database, rawFirebasePath),\r\n        orderByKey(),\r\n        limitToLast(1)\r\n      );\r\n\r\n      const rawUnsubscribe = onValue(rawQuery, (snapshot) => {\r\n        try {\r\n          const timeData = snapshot.val();\r\n          console.log('RAW data received:', timeData);\r\n\r\n          if (timeData) {\r\n            const latestTime = Object.keys(timeData)[0];\r\n            const rawData = {\r\n              ...timeData[latestTime],\r\n              timestamp: latestTime\r\n            };\r\n\r\n            const transformedData = transformToComponentFormat(\r\n              rawData,\r\n              locationData.name,\r\n              dataSource\r\n            );\r\n\r\n            setData(transformedData);\r\n            setError(null);\r\n          } else {\r\n            console.log('No RAW data found');\r\n            setData(createFallbackData(locationData.name, dataSource));\r\n            setError('ไม่พบข้อมูล RAW');\r\n          }\r\n          setLoading(false);\r\n        } catch (error) {\r\n          console.error('Error processing raw data:', error);\r\n          setData(createFallbackData(locationData.name, dataSource));\r\n          setError('เกิดข้อผิดพลาดในการประมวลผลข้อมูล RAW');\r\n          setLoading(false);\r\n        }\r\n      }, (err) => {\r\n        console.error('RAW data error:', err);\r\n        setError('เกิดข้อผิดพลาดในการดึงข้อมูล RAW');\r\n        setData(createFallbackData(locationData.name, dataSource));\r\n        setLoading(false);\r\n      });\r\n\r\n      return () => {\r\n        rawUnsubscribe();\r\n      };\r\n    }\r\n\r\n    console.log('========================');\r\n  }, [locationData?.id, locationData?.dataSource]);\r\n\r\n  return { data, loading, error };\r\n};\r\n\r\n// ===================================================================\r\n// Recommendation Functions - คงเดิม\r\n// ===================================================================\r\n\r\nexport const getGeneralRecommendations = (airQualityStatus) => {\r\n  switch (airQualityStatus) {\r\n    case 'Good':\r\n      return [\r\n        \"ไม่มีผลต่อสุขภาพสามารถใช้ชีวิตได้ตามปกติ\",\r\n        \"สามารถเปิดหน้าต่างระบายอากาศได้\"\r\n      ];\r\n    case 'Warning':\r\n      return [\r\n        \"ไม่มีผลต่อสุขภาพสามารถใช้ชีวิตได้ตามปกติ\",\r\n        \"สามารถเปิดหน้าต่างระบายอากาศได้\"\r\n      ];\r\n    case 'Affects health':\r\n      return [\r\n        \"มีความเสี่ยงต่อการระคายเคืองต่อดวงตา ผิวหนัง และลำคอ รวมถึงปัญหาระบบทางเดินหายใจ\",\r\n        \"หลีกเลี่ยงการทำกิจกรรมที่ก่อให้เกิดฝุ่นและสังเกตอาการผิดปกติของตนเอง\"\r\n      ];\r\n    case 'Danger':\r\n      return [\r\n        \"มีความเสี่ยงต่อการระคายเคืองต่อดวงตา ผิวหนัง และลำคอ รวมถึงปัญหาระบบทางเดินหายใจ\",\r\n        \"หลีกเลี่ยงพื้นที่ หรือกิจกรรมที่ทำให้เกิดฝุ่น\",\r\n        \"สังเกตอาการของตนเอง หากมีอาการควรไปพบแพทย์\",\r\n        \"ติดตั้งเครื่องฟอกอากาศ\"\r\n      ];\r\n    case 'Hazardous':\r\n      return [\r\n        \"มีความเสี่ยงสูงที่จะเกิดการระคายเคืองอย่างรุนแรงและผลกระทบด้านลบต่อสุขภาพที่อาจกระตุ้นให้เกิดโรคหลอดเลือดหัวใจและระบบทางเดินหายใจ\",\r\n        \"งดไปยังพื้นที่ หรือทำกิจกรรมที่ก่อให้เกิดฝุ่น\",\r\n        \"สังเกตอาการของตนเอง หากมีอาการควรไปพบแพทย์\",\r\n        \"ติดตั้งเครื่องฟอกอากาศ\"\r\n      ];\r\n    default:\r\n      return [\r\n        \"กำลังโหลดข้อมูล...\",\r\n        \"กำลังวิเคราะห์คุณภาพอากาศ...\",\r\n        \"กำลังประมวลผลคำแนะนำ...\"\r\n      ];\r\n  }\r\n};\r\n\r\nexport const getSensitiveRecommendations = (airQualityStatus) => {\r\n  switch (airQualityStatus) {\r\n    case 'Good':\r\n      return [\r\n        \"ไม่มีผลต่อสุขภาพสามารถใช้ชีวิตได้ตามปกติ\",\r\n        \"สามารถเปิดหน้าต่างระบายอากาศได้\"\r\n      ];\r\n    case 'Warning':\r\n      return [\r\n        \"สามารถเปิดหน้าต่างระบายอากาศได้\",\r\n        \"มีความเสี่ยงต่อการระคายเคืองต่อดวงตา ผิวหนัง และลำคอ รวมถึงปัญหาระบบทางเดินหายใจ\",\r\n        \"สังเกตอาการของตนเอง หากมีอาการควรไปพบแพทย์\"\r\n      ];\r\n    case 'Affects health':\r\n      return [\r\n        \"มีความเสี่ยงต่อการระคายเคืองต่อดวงตา ผิวหนัง และลำคอ รวมถึงปัญหาระบบทางเดินหายใจ\",\r\n        \"ปิดหน้าต่าง และหลีกเลี่ยงการถ่ายเทอากาศจากภายนอก\",\r\n        \"สังเกตอาการของตนเอง หากมีอาการควรไปพบแพทย์\"\r\n      ];\r\n    case 'Danger':\r\n      return [\r\n        \"มีความเสี่ยงต่อการระคายเคืองอย่างรุนแรงต่อดวงตา ผิวหนัง และลำคอ รวมถึงปัญหาระบบทางเดินหายใจ\",\r\n        \"หลีกเลี่ยงพื้นที่ หรือการทำกิจกรรมที่ก่อให้เกิดฝุ่น\",\r\n        \"สังเกตอาการของตนเอง หากมีอาการควรไปพบแพทย์\",\r\n        \"เตรียมยาหรืออุปกรณ์ตามคำสั่งแพทย์\",\r\n        \"ติดตั้งเครื่องฟอกอากาศ\"\r\n      ];\r\n    case 'Hazardous':\r\n      return [\r\n        \"มีความเสี่ยงสูงที่จะเกิดการระคายเคืองอย่างรุนแรงและผลกระทบด้านลบต่อสุขภาพที่อาจกระตุ้นให้เกิดโรคหลอดเลือดหัวใจและระบบทางเดินหายใจ\",\r\n        \"งดไปยังพื้นที่ หรือทำกิจกรรมที่ก่อให้เกิดฝุ่น\",\r\n        \"สังเกตอาการของตนเอง หากมีอาการควรไปพบแพทย์\",\r\n        \"เตรียมยาหรืออุปกรณ์ตามคำสั่งแพทย์\",\r\n        \"ติดตั้งเครื่องฟอกอากาศ\"\r\n      ];\r\n    default:\r\n      return [\r\n        \"กำลังโหลดข้อมูล...\",\r\n        \"กำลังวิเคราะห์คุณภาพอากาศ...\",\r\n        \"กำลังประมวลผลคำแนะนำ...\"\r\n      ];\r\n  }\r\n};\r\n\r\nexport const getRecommendationIcon = (recommendation) => {\r\n  const text = recommendation.toLowerCase();\r\n\r\n  if (text.includes('ไม่มีผลต่อสุขภาพ') && text.includes('ใช้ชีวิตได้ตามปกติ')) {\r\n    return '/assets/images/work.png';\r\n  }\r\n  if (text.includes('เปิดหน้าต่างระบายอากาศ')) {\r\n    return '/assets/images/window.png';\r\n  }\r\n  if (text.includes('ปิดหน้าต่าง')) {\r\n    return '/assets/images/window.png';\r\n  }\r\n  if (text.includes('สังเกตอาการของตนเอง') || text.includes('กลุ่มเปราะบาง') || text.includes('กลุ่มคนทั่วไป') || text.includes('ความเสี่ยง')) {\r\n    return '/assets/images/irritation.png';\r\n  }\r\n  if (text.includes('งดการทำกิจกรรมหรือเข้าใกล้พื้นที่ที่มีฝุ่น') || text.includes('หลีกเลี่ยงการทำกิจกรรมที่ก่อให้เกิดฝุ่น')) {\r\n    return '/assets/images/no-dust.png';\r\n  }\r\n  if (text.includes('เตรียมยาหรืออุปกรณ์ตามคำสั่งแพทย์')) {\r\n    return '/assets/images/medicine.png';\r\n  }\r\n  if (text.includes('ติดตั้งเครื่องฟอกอากาศ')) {\r\n    return '/assets/images/air-purifier.png';\r\n  }\r\n  if (text.includes('หากมีอาการให้ไปพบแพทย์') || text.includes('ไปพบแพทย์')) {\r\n    return '/assets/images/Doctor.png';\r\n  }\r\n  if (text.includes('กำลังโหลด') || text.includes('กำลังวิเคราะห์') || text.includes('กำลังประมวลผล')) {\r\n    return '⏳';\r\n  }\r\n\r\n  return '•';\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 745, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/okero/Desktop/GITHUB/CurrentWeb/src/components/Animation.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\n\r\n// Hook สำหรับตรวจสอบ prefers-reduced-motion\r\nconst useReducedMotion = () => {\r\n    const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n        setPrefersReducedMotion(mediaQuery.matches);\r\n\r\n        const handleChange = (event) => setPrefersReducedMotion(event.matches);\r\n        mediaQuery.addEventListener('change', handleChange);\r\n\r\n        return () => mediaQuery.removeEventListener('change', handleChange);\r\n    }, []);\r\n\r\n    return prefersReducedMotion;\r\n};\r\n\r\n// Component สำหรับ Digit เดี่ยวที่มี delay - ปรับปรุงแล้ว\r\nconst CascadeDigit = React.memo(({\r\n    digit,\r\n    className = \"\",\r\n    delay = 0,\r\n    animationType = \"slide\",\r\n    duration = 500,\r\n    onAnimationComplete\r\n}) => {\r\n    const [currentDigit, setCurrentDigit] = useState(digit);\r\n    const [isAnimating, setIsAnimating] = useState(false);\r\n    const [shouldAnimate, setShouldAnimate] = useState(false);\r\n    const prefersReducedMotion = useReducedMotion();\r\n    const timeoutRefs = useRef([]);\r\n\r\n    // ทำความสะอาด timeouts เมื่อ component unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            timeoutRefs.current.forEach(timeout => clearTimeout(timeout));\r\n            timeoutRefs.current = [];\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (digit !== currentDigit) {\r\n            // ถ้า prefers reduced motion, ไม่ทำ animation\r\n            if (prefersReducedMotion) {\r\n                setCurrentDigit(digit);\r\n                onAnimationComplete?.();\r\n                return;\r\n            }\r\n\r\n            // Clear existing timeouts\r\n            timeoutRefs.current.forEach(timeout => clearTimeout(timeout));\r\n            timeoutRefs.current = [];\r\n\r\n            // เริ่ม animation หลังจาก delay\r\n            const delayTimer = setTimeout(() => {\r\n                setShouldAnimate(true);\r\n                setIsAnimating(true);\r\n\r\n                // หยุด animation หลังจาก duration\r\n                const animationTimer = setTimeout(() => {\r\n                    setCurrentDigit(digit);\r\n                    setIsAnimating(false);\r\n                    setShouldAnimate(false);\r\n                    onAnimationComplete?.();\r\n                }, duration);\r\n\r\n                timeoutRefs.current.push(animationTimer);\r\n            }, delay);\r\n\r\n            timeoutRefs.current.push(delayTimer);\r\n        }\r\n    }, [digit, currentDigit, delay, duration, prefersReducedMotion, onAnimationComplete]);\r\n\r\n    const getAnimationClass = useCallback(() => {\r\n        if (!shouldAnimate || prefersReducedMotion) return '';\r\n\r\n        switch (animationType) {\r\n            case \"slide\": return 'animate-cascade-slide-in';\r\n            case \"flip\": return 'animate-cascade-flip-in';\r\n            case \"fade\": return 'animate-cascade-fade-in';\r\n            default: return '';\r\n        }\r\n    }, [shouldAnimate, animationType, prefersReducedMotion]);\r\n\r\n    const getTransformStyle = useCallback(() => {\r\n        if (prefersReducedMotion) return {};\r\n\r\n        const easing = \"cubic-bezier(0.25, 0.46, 0.45, 0.94)\";\r\n\r\n        switch (animationType) {\r\n            case \"slide\":\r\n                return {\r\n                    transform: isAnimating ? 'translateY(-100%) scale(0.95)' : 'translateY(0) scale(1)',\r\n                    opacity: isAnimating ? 0 : 1,\r\n                    filter: isAnimating ? 'blur(1px)' : 'blur(0px)',\r\n                    transition: `all ${duration}ms ${easing}`\r\n                };\r\n            case \"flip\":\r\n                return {\r\n                    transform: isAnimating ? 'rotateX(-90deg) scale(0.9)' : 'rotateX(0deg) scale(1)',\r\n                    opacity: isAnimating ? 0 : 1,\r\n                    transition: `all ${duration}ms ${easing}`,\r\n                    transformOrigin: 'center bottom'\r\n                };\r\n            case \"fade\":\r\n                return {\r\n                    opacity: isAnimating ? 0 : 1,\r\n                    transform: isAnimating ? 'scale(0.8)' : 'scale(1)',\r\n                    filter: isAnimating ? 'blur(2px)' : 'blur(0px)',\r\n                    transition: `all ${duration}ms ${easing}`\r\n                };\r\n            default:\r\n                return {};\r\n        }\r\n    }, [isAnimating, animationType, duration, prefersReducedMotion]);\r\n\r\n    return (\r\n        <div className={`relative inline-block overflow-hidden transform-cascade ${className}`}>\r\n            <span\r\n                className={`font-numbers block transform-gpu ${getAnimationClass()}`}\r\n                style={{\r\n                    ...getTransformStyle(),\r\n                    perspective: '1000px',\r\n                    transformStyle: 'preserve-3d'\r\n                }}\r\n            >\r\n                {shouldAnimate ? digit : currentDigit}\r\n            </span>\r\n        </div>\r\n    );\r\n});\r\n\r\nCascadeDigit.displayName = 'CascadeDigit';\r\n\r\n// Cascade Number Component - ปรับปรุงแล้ว\r\nconst CascadeNumber = React.memo(({\r\n    value,\r\n    decimals = 3,\r\n    className = \"\",\r\n    animationType = \"slide\",\r\n    direction = \"left-to-right\",\r\n    staggerDelay = 80,\r\n    duration = 500,\r\n    showChangeIndicator = false,\r\n    minDigits = 1,\r\n    theme = \"default\" // เพิ่ม theme support\r\n}) => {\r\n    const [trend, setTrend] = useState(\"stable\");\r\n    const previousValue = useRef(value);\r\n    const prefersReducedMotion = useReducedMotion();\r\n\r\n    // ใช้ useMemo สำหรับการคำนวณที่ซับซ้อน\r\n    const formattedParts = useMemo(() => {\r\n        try {\r\n            const formattedValue = Number(value).toFixed(decimals);\r\n            const [integerPart, decimalPart] = formattedValue.split('.');\r\n            const paddedInteger = integerPart.padStart(minDigits, '0');\r\n\r\n            return [\r\n                ...paddedInteger.split('').map((d, i) => ({\r\n                    type: 'integer',\r\n                    digit: d,\r\n                    index: i,\r\n                    key: `int-${i}`\r\n                })),\r\n                ...(decimals > 0 ? [{\r\n                    type: 'decimal-point',\r\n                    digit: '.',\r\n                    index: 'dot',\r\n                    key: 'dot'\r\n                }] : []),\r\n                ...(decimals > 0 ? decimalPart.split('').map((d, i) => ({\r\n                    type: 'decimal',\r\n                    digit: d,\r\n                    index: i,\r\n                    key: `dec-${i}`\r\n                })) : [])\r\n            ];\r\n        } catch (error) {\r\n            console.warn('CascadeNumber: Invalid value provided', value);\r\n            return [];\r\n        }\r\n    }, [value, decimals, minDigits]);\r\n\r\n    useEffect(() => {\r\n        if (previousValue.current < value) {\r\n            setTrend(\"up\");\r\n        } else if (previousValue.current > value) {\r\n            setTrend(\"down\");\r\n        } else {\r\n            setTrend(\"stable\");\r\n        }\r\n\r\n        const timer = setTimeout(() => setTrend(\"stable\"), prefersReducedMotion ? 500 : 2500);\r\n        previousValue.current = value;\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [value, prefersReducedMotion]);\r\n\r\n    const getDigitDelay = useCallback((index) => {\r\n        if (prefersReducedMotion) return 0;\r\n\r\n        if (direction === \"right-to-left\") {\r\n            return (formattedParts.length - 1 - index) * staggerDelay;\r\n        }\r\n        return index * staggerDelay;\r\n    }, [direction, formattedParts.length, staggerDelay, prefersReducedMotion]);\r\n\r\n    const getTrendStyles = useCallback(() => {\r\n        const baseClasses = \"text-xs transition-all duration-700 ease-out ml-2 transform\";\r\n\r\n        switch (trend) {\r\n            case \"up\":\r\n                return {\r\n                    className: `${baseClasses} text-green-400`,\r\n                    style: {\r\n                        transform: 'translateY(-3px)',\r\n                        opacity: 1\r\n                    },\r\n                    icon: \"\"\r\n                };\r\n            case \"down\":\r\n                return {\r\n                    className: `${baseClasses} text-red-400`,\r\n                    style: {\r\n                        transform: 'translateY(3px)',\r\n                        opacity: 1\r\n                    },\r\n                    icon: \"\"\r\n                };\r\n            default:\r\n                return {\r\n                    className: `${baseClasses} text-gray-400`,\r\n                    style: {\r\n                        transform: 'translateY(0)',\r\n                        opacity: 0\r\n                    },\r\n                    icon: \"\"\r\n                };\r\n        }\r\n    }, [trend]);\r\n\r\n    const trendStyles = getTrendStyles();\r\n\r\n    return (\r\n        <div className={`relative inline-flex items-center gap-0 cascade-container ${theme}`}>\r\n            <div className={`inline-flex ${className}`}>\r\n                {formattedParts.map((part, index) => (\r\n                    <div\r\n                        key={part.key}\r\n                        className=\"cascade-digit-wrapper\"\r\n                        style={{ minWidth: '0.6em' }} // ใช้ minWidth เดียวกันทั้งตัวเลขและจุด\r\n                    >\r\n                        {part.digit === '.' ? (\r\n                            <span className=\"font-numbers\">.</span>\r\n                        ) : (\r\n                            <CascadeDigit\r\n                                digit={part.digit}\r\n                                className=\"text-center\"\r\n                                delay={getDigitDelay(index)}\r\n                                animationType={animationType}\r\n                                duration={duration}\r\n                            />\r\n                        )}\r\n                </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Enhanced Change Indicator */}\r\n            {showChangeIndicator && trend !== \"stable\" && (\r\n                <span\r\n                    className={trendStyles.className}\r\n                    style={{\r\n                        ...trendStyles.style,\r\n                        animation: !prefersReducedMotion ? 'cascadeFadeInOut 3s cubic-bezier(0.25, 0.46, 0.45, 0.94)' : 'none'\r\n                    }}\r\n                    aria-live=\"polite\"\r\n                    aria-label={`Value ${trend}`}\r\n                >\r\n                    {trendStyles.icon}\r\n                </span>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nCascadeNumber.displayName = 'CascadeNumber';\r\n\r\n// Wave Effect Number Component - ปรับปรุงแล้ว\r\nconst WaveNumber = React.memo(({\r\n    value,\r\n    decimals = 3,\r\n    className = \"\",\r\n    waveDelay = 60,\r\n    duration = 600\r\n}) => {\r\n    const [displayDigits, setDisplayDigits] = useState([]);\r\n    const [isWaving, setIsWaving] = useState(false);\r\n    const previousValue = useRef(value);\r\n    const prefersReducedMotion = useReducedMotion();\r\n    const timeoutRefs = useRef([]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            timeoutRefs.current.forEach(timeout => clearTimeout(timeout));\r\n            timeoutRefs.current = [];\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const formattedValue = Number(value).toFixed(decimals);\r\n            const [integerPart, decimalPart] = formattedValue.split('.');\r\n            const newDigits = [...integerPart.split(''), '.', ...decimalPart.split('')];\r\n\r\n            if (previousValue.current !== value) {\r\n                setIsWaving(true);\r\n\r\n                // Clear existing timeouts\r\n                timeoutRefs.current.forEach(timeout => clearTimeout(timeout));\r\n                timeoutRefs.current = [];\r\n\r\n                if (prefersReducedMotion) {\r\n                    setDisplayDigits(newDigits.map(digit => ({ digit, isNew: false })));\r\n                    setIsWaving(false);\r\n                } else {\r\n                    // Wave animation\r\n                    newDigits.forEach((digit, index) => {\r\n                        const timeout = setTimeout(() => {\r\n                            setDisplayDigits(prev => {\r\n                                const updated = [...prev];\r\n                                updated[index] = {\r\n                                    digit,\r\n                                    isNew: true,\r\n                                    timestamp: Date.now()\r\n                                };\r\n                                return updated;\r\n                            });\r\n                        }, index * waveDelay);\r\n\r\n                        timeoutRefs.current.push(timeout);\r\n                    });\r\n\r\n                    // Reset wave state\r\n                    const resetTimeout = setTimeout(() => {\r\n                        setIsWaving(false);\r\n                        setDisplayDigits(newDigits.map(digit => ({ digit, isNew: false })));\r\n                    }, newDigits.length * waveDelay + duration);\r\n\r\n                    timeoutRefs.current.push(resetTimeout);\r\n                }\r\n\r\n                previousValue.current = value;\r\n            } else if (displayDigits.length === 0) {\r\n                setDisplayDigits(newDigits.map(digit => ({ digit, isNew: false })));\r\n            }\r\n        } catch (error) {\r\n            console.warn('WaveNumber: Invalid value provided', value);\r\n        }\r\n    }, [value, decimals, waveDelay, duration, prefersReducedMotion]);\r\n\r\n    return (\r\n        <div className={`inline-flex wave-effect ${className}`}>\r\n            {displayDigits.map((item, index) => (\r\n                <div\r\n                    key={index}\r\n                    className=\"relative overflow-hidden\"\r\n                    style={{ minWidth: item.digit === '.' ? '4px' : '0.6em' }}\r\n                >\r\n                    <span\r\n                        className={`\r\n              font-numbers block text-center transform-gpu transition-all ease-out\r\n              ${item.isNew && !prefersReducedMotion ? 'animate-wave-bounce' : ''}\r\n            `}\r\n                        style={{\r\n                            transform: item.isNew && !prefersReducedMotion\r\n                                ? 'translateY(-10px) scale(1.1)'\r\n                                : 'translateY(0) scale(1)',\r\n                            transition: `all ${duration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,\r\n                            transitionDelay: prefersReducedMotion ? '0ms' : `${index * waveDelay}ms`,\r\n                            filter: item.isNew && !prefersReducedMotion\r\n                                ? 'drop-shadow(0 0 8px rgba(59, 130, 246, 0.5))'\r\n                                : 'none'\r\n                        }}\r\n                    >\r\n                        {item.digit}\r\n                    </span>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n});\r\n\r\nWaveNumber.displayName = 'WaveNumber';\r\n\r\n// Smooth Ripple Effect - ปรับปรุงแล้ว\r\nconst RippleNumber = React.memo(({\r\n    value,\r\n    decimals = 3,\r\n    className = \"\",\r\n    rippleDelay = 50,\r\n    duration = 800\r\n}) => {\r\n    const [animatingDigits, setAnimatingDigits] = useState(new Set());\r\n    const previousValue = useRef(value);\r\n    const prefersReducedMotion = useReducedMotion();\r\n    const timeoutRefs = useRef([]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            timeoutRefs.current.forEach(timeout => clearTimeout(timeout));\r\n            timeoutRefs.current = [];\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (previousValue.current !== value) {\r\n            try {\r\n                const formattedValue = Number(value).toFixed(decimals);\r\n                const [integerPart, decimalPart] = formattedValue.split('.');\r\n                const allDigits = [...integerPart.split(''), '.', ...decimalPart.split('')];\r\n\r\n                // Clear existing timeouts\r\n                timeoutRefs.current.forEach(timeout => clearTimeout(timeout));\r\n                timeoutRefs.current = [];\r\n\r\n                if (prefersReducedMotion) {\r\n                    previousValue.current = value;\r\n                    return;\r\n                }\r\n\r\n                // Ripple effect จากกลางออกไปข้าง\r\n                const center = Math.floor(allDigits.length / 2);\r\n\r\n                allDigits.forEach((_, index) => {\r\n                    const distance = Math.abs(index - center);\r\n                    const delay = distance * rippleDelay;\r\n\r\n                    const startTimeout = setTimeout(() => {\r\n                        setAnimatingDigits(prev => new Set([...prev, index]));\r\n\r\n                        // Remove from animating set after animation\r\n                        const endTimeout = setTimeout(() => {\r\n                            setAnimatingDigits(prev => {\r\n                                const newSet = new Set(prev);\r\n                                newSet.delete(index);\r\n                                return newSet;\r\n                            });\r\n                        }, duration);\r\n\r\n                        timeoutRefs.current.push(endTimeout);\r\n                    }, delay);\r\n\r\n                    timeoutRefs.current.push(startTimeout);\r\n                });\r\n\r\n                previousValue.current = value;\r\n            } catch (error) {\r\n                console.warn('RippleNumber: Invalid value provided', value);\r\n            }\r\n        }\r\n    }, [value, decimals, rippleDelay, duration, prefersReducedMotion]);\r\n\r\n    const formattedValue = useMemo(() => {\r\n        try {\r\n            return Number(value).toFixed(decimals);\r\n        } catch {\r\n            return '0'.repeat(decimals + 2);\r\n        }\r\n    }, [value, decimals]);\r\n\r\n    const [integerPart, decimalPart] = formattedValue.split('.');\r\n    const allDigits = [...integerPart.split(''), '.', ...decimalPart.split('')];\r\n\r\n    return (\r\n        <div className={`inline-flex ripple-effect ${className}`}>\r\n            {allDigits.map((digit, index) => (\r\n                <div\r\n                    key={index}\r\n                    className={`relative overflow-hidden ripple-digit ${animatingDigits.has(index) ? 'rippling' : ''}`}\r\n                    style={{ minWidth: digit === '.' ? '4px' : '0.6em' }}\r\n                >\r\n                    <span\r\n                        className={`\r\n              font-numbers block text-center transform-gpu transition-all ease-out\r\n              ${animatingDigits.has(index) && !prefersReducedMotion ? 'animate-ripple-glow' : ''}\r\n            `}\r\n                        style={{\r\n                            transform: animatingDigits.has(index) && !prefersReducedMotion\r\n                                ? 'translateY(-8px) scale(1.15)'\r\n                                : 'translateY(0) scale(1)',\r\n                            transition: `all ${duration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,\r\n                            filter: animatingDigits.has(index) && !prefersReducedMotion\r\n                                ? 'drop-shadow(0 4px 12px rgba(59, 130, 246, 0.4))'\r\n                                : 'none',\r\n                            textShadow: animatingDigits.has(index) && !prefersReducedMotion\r\n                                ? '0 0 10px rgba(59, 130, 246, 0.6)'\r\n                                : 'none'\r\n                        }}\r\n                    >\r\n                        {digit}\r\n                    </span>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n});\r\n\r\nRippleNumber.displayName = 'RippleNumber';\r\n\r\n// Updated LiveActivityNumber with enhanced features\r\nconst LiveActivityNumber = React.memo(({\r\n    value,\r\n    type = \"cascade-slide\",\r\n    decimals = 3,\r\n    className = \"\",\r\n    showChangeIndicator = true,\r\n    minDigits = 1,\r\n    direction = \"right-to-left\",\r\n    theme = \"default\",\r\n    onValueChange,\r\n    errorFallback = \"---\"\r\n}) => {\r\n    // Error boundary สำหรับ invalid values\r\n    const safeValue = useMemo(() => {\r\n        if (typeof value !== 'number' || !isFinite(value)) {\r\n            console.warn('LiveActivityNumber: Invalid value provided, using fallback');\r\n            return 0;\r\n        }\r\n        return value;\r\n    }, [value]);\r\n\r\n    useEffect(() => {\r\n        onValueChange?.(safeValue);\r\n    }, [safeValue, onValueChange]);\r\n\r\n    const commonProps = {\r\n        value: safeValue,\r\n        decimals,\r\n        className,\r\n        minDigits\r\n    };\r\n\r\n    try {\r\n        switch (type) {\r\n            case \"cascade-slide\":\r\n                return (\r\n                    <CascadeNumber\r\n                        {...commonProps}\r\n                        animationType=\"slide\"\r\n                        direction={direction}\r\n                        staggerDelay={80}\r\n                        duration={500}\r\n                        showChangeIndicator={showChangeIndicator}\r\n                        theme={theme}\r\n                    />\r\n                );\r\n            case \"cascade-flip\":\r\n                return (\r\n                    <CascadeNumber\r\n                        {...commonProps}\r\n                        animationType=\"flip\"\r\n                        direction={direction}\r\n                        staggerDelay={100}\r\n                        duration={600}\r\n                        showChangeIndicator={showChangeIndicator}\r\n                        theme={theme}\r\n                    />\r\n                );\r\n            case \"cascade-fade\":\r\n                return (\r\n                    <CascadeNumber\r\n                        {...commonProps}\r\n                        animationType=\"fade\"\r\n                        direction={direction}\r\n                        staggerDelay={70}\r\n                        duration={450}\r\n                        showChangeIndicator={showChangeIndicator}\r\n                        theme={theme}\r\n                    />\r\n                );\r\n            case \"wave\":\r\n                return (\r\n                    <WaveNumber\r\n                        {...commonProps}\r\n                        waveDelay={60}\r\n                        duration={600}\r\n                    />\r\n                );\r\n            case \"ripple\":\r\n                return (\r\n                    <RippleNumber\r\n                        {...commonProps}\r\n                        rippleDelay={50}\r\n                        duration={800}\r\n                    />\r\n                );\r\n            default:\r\n                return <span className={`font-numbers ${className}`}>{safeValue.toFixed(decimals)}</span>;\r\n        }\r\n    } catch (error) {\r\n        console.error('LiveActivityNumber: Render error', error);\r\n        return <span className={`font-numbers ${className}`}>{errorFallback}</span>;\r\n    }\r\n});\r\n\r\nLiveActivityNumber.displayName = 'LiveActivityNumber';\r\n\r\nexport {\r\n    CascadeDigit,\r\n    CascadeNumber,\r\n    WaveNumber,\r\n    RippleNumber,\r\n    LiveActivityNumber,\r\n    useReducedMotion\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1531, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1537, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/okero/Desktop/GITHUB/CurrentWeb/src/components/MonitoringInterface.js"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom'; // เพิ่ม import สำหรับ Portal เพื่อแก้ปัญหา z-index\r\nimport Link from 'next/link';\r\nimport { ArrowUpRight, Thermometer, Droplets, Menu, X, ChevronUp, MapPin, Clock, TrendingUp, BarChart3, UserX, Users } from 'lucide-react';\r\nimport {\r\n  getAirQualityColor,\r\n  formatPMValue,\r\n  getRecommendationIcon,\r\n  useMonitoringData,\r\n  useLocationMonitoringData,\r\n  getGeneralRecommendations,\r\n  getSensitiveRecommendations,\r\n  determineAirQuality\r\n} from '../data/monitoring-data';\r\n\r\n// Import Live Activity Animation Components\r\nimport { LiveActivityNumber } from '../components/Animation';\r\nimport('./MapComponents')\r\n\r\n// Helper function สำหรับกำหนดระดับความเสี่ยงสำหรับกลุ่มต่างๆ\r\n// ฟังก์ชันนี้จะช่วยในการคำนวณสถานะคุณภาพอากาศสำหรับกลุ่มผู้ใช้แต่ละประเภท\r\nconst getAirQualityForGroup = (pc01, pm01, pm25, pm100, groupType = 'general') => {\r\n  return determineAirQuality(pc01, pm01, pm25, pm100);\r\n};\r\n\r\n// Header Component - ส่วนหัวของหน้าเว็บที่มี navigation และ logo\r\nconst Header = () => {\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-50 h-18 sm:h-20 bg-green-100 border-b border-green-100 flex-shrink-0\">\r\n      <div className=\"h-full flex items-center justify-between px-4 sm:px-6\">\r\n        <div className=\"flex items-center gap-4 sm:gap-6\">\r\n          <div className=\"w-20 h-20 sm:w-24 sm:h-24 flex-shrink-0 flex items-center justify-center\">\r\n            <img\r\n              src=\"/assets/images/logo.png\"\r\n              alt=\"Mupcop logo\"\r\n              className=\"w-20 h-20 sm:w-24 sm:h-24 object-contain\"\r\n              width={96}\r\n              height={96}\r\n            />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-black font-montserrat\">Mupcop</h1>\r\n            <h2 className=\"text-base sm:text-lg lg:text-xl font-light text-black max-w-xl font-montserrat\">\r\n              Multi-factor ultrafine particle optimization prediction\r\n            </h2>\r\n          </div>\r\n        </div>\r\n\r\n        <nav className=\"hidden sm:flex items-center gap-4 sm:gap-6\">\r\n          <Link href=\"/\" className=\"px-4 py-2 text-lg sm:text-xl lg:text-2xl font-semibold text-black rounded-lg hover:bg-green-200 transition-colors font-montserrat\">\r\n            Air quality\r\n          </Link>\r\n          <Link href=\"/history-data\" className=\"px-4 py-2 text-lg sm:text-xl lg:text-2xl font-semibold text-black rounded-lg hover:bg-green-200 transition-colors font-montserrat\">\r\n            History data\r\n          </Link>\r\n        </nav>\r\n\r\n        <button\r\n          className=\"sm:hidden\"\r\n          onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n        >\r\n          {isMenuOpen ? <X size={24} /> : <Menu size={24} />}\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\n// MonitoringPanel Component - component หลักสำหรับแสดงข้อมูลการตรวจวัด\r\n// component นี้จะรับ props เกี่ยวกับตำแหน่งที่เลือกและฟังก์ชันสำหรับล้างการเลือก\r\nconst MonitoringPanel = ({ selectedLocation, onLocationClear }) => {\r\n  // State สำหรับจัดการ modal popup ของคำแนะนำ\r\n  const [showRecommendationPopup, setShowRecommendationPopup] = useState(false);\r\n  const [selectedRecommendations, setSelectedRecommendations] = useState([]);\r\n  const [selectedGroupType, setSelectedGroupType] = useState('general');\r\n\r\n  // ใช้ custom hooks สำหรับดึงข้อมูลจาก Firebase\r\n  // hooks เหล่านี้จะส่งคืน object ที่มี data, loading, และ error state\r\n  const { data: defaultData, loading: defaultLoading, error: defaultError } = useMonitoringData();\r\n  const { data: locationData, loading: locationLoading, error: locationError } = useLocationMonitoringData(selectedLocation);\r\n\r\n  // เลือกข้อมูลที่จะใช้แสดงผลขึ้นอยู่กับว่าผู้ใช้เลือกตำแหน่งหรือไม่\r\n  // หากเลือกตำแหน่งจะใช้ข้อมูลของตำแหน่งนั้น หากไม่เลือกจะใช้ข้อมูล default\r\n  const data = selectedLocation ? locationData : defaultData;\r\n  const loading = selectedLocation ? locationLoading : defaultLoading;\r\n  const error = selectedLocation ? locationError : defaultError;\r\n\r\n  // ตรวจสอบความถูกต้องของข้อมูลก่อนนำไปใช้แสดงผล\r\n  // การตรวจสอบนี้จำเป็นเพื่อป้องกัน runtime errors เมื่อข้อมูลไม่ครบถ้วน\r\n  const isDataValid = data && data.pmReadings && Array.isArray(data.pmReadings);\r\n  const statusColor = isDataValid ? getAirQualityColor(data.mainReading?.status || 'Good') : '#2DC653';\r\n\r\n  // ฟังก์ชันปลอดภัยสำหรับดึงค่า PM จาก array ของ readings\r\n  // ฟังก์ชันนี้จะคืนค่า 0 หากไม่พบข้อมูลหรือข้อมูลไม่ถูกต้อง\r\n  const getSafeValue = (readings, type) => {\r\n    if (!readings || !Array.isArray(readings)) return 0;\r\n    const reading = readings.find(r => r && r.type === type);\r\n    return parseFloat(reading?.value || 0) || 0;\r\n  };\r\n\r\n  // คำนวณสถานะคุณภาพอากาศสำหรับกลุ่มต่างๆ\r\n  // ฟังก์ชันนี้จะใช้ข้อมูล PM ทั้งหมดมาคำนวณสถานะโดยรวม\r\n  const calculateGroupStatus = (groupType = 'general') => {\r\n    if (!isDataValid) return 'Good';\r\n\r\n    const pc01Value = getSafeValue(data.pmReadings, 'PC01');\r\n    const pm01Value = getSafeValue(data.pmReadings, 'PM0.1');\r\n    const pm25Value = getSafeValue(data.pmReadings, 'PM2.5');\r\n    const pm10Value = getSafeValue(data.pmReadings, 'PM10');\r\n\r\n    return determineAirQuality(pc01Value, pm01Value, pm25Value, pm10Value);\r\n  };\r\n\r\n  // คำนวณสถานะสำหรับทั้งสองกลุ่ม\r\n  const sensitiveStatus = calculateGroupStatus('sensitive');\r\n  const generalStatus = calculateGroupStatus('general');\r\n\r\n  // จัดการการคลิกปุ่มคำแนะนำ\r\n  // ฟังก์ชันนี้จะดึงคำแนะนำที่เหมาะสมตามกลุ่มและสถานะคุณภาพอากาศ\r\n  const handleRecommendationClick = (groupType) => {\r\n    const status = groupType === 'sensitive' ? sensitiveStatus : generalStatus;\r\n    const recommendations = groupType === 'sensitive'\r\n      ? getSensitiveRecommendations(status)\r\n      : getGeneralRecommendations(status);\r\n\r\n    setSelectedRecommendations(recommendations);\r\n    setSelectedGroupType(groupType);\r\n    setShowRecommendationPopup(true);\r\n  };\r\n\r\n  // ฟังก์ชันสำหรับปิด modal popup\r\n  const closePopup = () => {\r\n    setShowRecommendationPopup(false);\r\n    setSelectedRecommendations([]);\r\n  };\r\n\r\n  // จัดการการกด Escape key เพื่อปิด modal\r\n  // useEffect นี้จะเพิ่ม event listener เมื่อ modal เปิดและลบออกเมื่อปิด\r\n  useEffect(() => {\r\n    const handleEscapeKey = (event) => {\r\n      if (event.key === 'Escape' && showRecommendationPopup) {\r\n        closePopup();\r\n      }\r\n    };\r\n\r\n    if (showRecommendationPopup) {\r\n      document.addEventListener('keydown', handleEscapeKey);\r\n      // ป้องกันการ scroll ของ body เมื่อ modal เปิด\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      // คืนค่า scroll ของ body เมื่อ modal ปิด\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n\r\n    // cleanup function จะทำงานเมื่อ component unmount หรือ dependencies เปลี่ยน\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscapeKey);\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [showRecommendationPopup]);\r\n\r\n  // แสดง loading state ขณะที่ข้อมูลกำลังถูกดึงจาก Firebase\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px] w-full\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-800 mb-3\"></div>\r\n          <p className=\"text-lg sm:text-xl text-gray-600 font-sarabun\">กำลังโหลดข้อมูล...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // แสดง error state หากเกิดปัญหาในการดึงข้อมูล\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px] w-full\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-red-500 mb-3\">⚠️</div>\r\n          <p className=\"text-lg sm:text-xl text-red-600 font-sarabun\">เกิดข้อผิดพลาด: {error}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"mt-3 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\"\r\n          >\r\n            รีเฟรช\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // แสดง no data state หากไม่มีข้อมูล\r\n  if (!data) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px] w-full\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-gray-400 mb-3\">📭</div>\r\n          <p className=\"text-lg sm:text-xl text-gray-600 font-sarabun\">ไม่มีข้อมูล</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // แสดงเนื้อหาหลักของ component\r\n  return (\r\n    <div className=\"w-full bg-white\">\r\n      <div className=\"p-3 sm:p-4\">\r\n        {/* Location Header - ส่วนหัวที่แสดงชื่อและปุ่มล้างการเลือกตำแหน่ง */}\r\n        <div className=\"flex items-center justify-between mb-3 sm:mb-4\">\r\n          <h2 className=\"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-light text-black font-montserrat\">UFPs Monitoring</h2>\r\n          {selectedLocation && onLocationClear && (\r\n            <button\r\n              onClick={onLocationClear}\r\n              className=\"text-base sm:text-lg text-gray-500 hover:text-gray-700 bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded-md transition-colors font-sarabun\"\r\n            >\r\n              × ล้าง\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Main reading card - การ์ดหลักที่แสดงข้อมูลสำคัญ */}\r\n        <div className=\"bg-white rounded-lg p-3 sm:p-4 shadow-sm border border-gray-100 mb-3 sm:mb-4\">\r\n          {/* LIVE indicator และวันที่ */}\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\" />\r\n              <span className=\"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-semibold text-black font-montserrat\">LIVE</span>\r\n            </div>\r\n            <span className=\"text-base sm:text-lg lg:text-xl text-black font-numbers\">{data.date || 'N/A'}</span>\r\n          </div>\r\n\r\n          {/* Location name และเวลาอัพเดท */}\r\n          <div className=\"text-base sm:text-lg lg:text-xl text-gray-600 mb-3 sm:mb-4\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <MapPin className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                <span className=\"truncate text-base sm:text-lg lg:text-xl font-sarabun\">\r\n                  {selectedLocation ? selectedLocation.name : data.location || \"Cafe Amazon สาขา ST\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-base sm:text-lg lg:text-xl text-gray-500 sm:ml-2\">\r\n                <span className=\"font-sarabun\">อัพเดท: </span>\r\n                <span className=\"font-numbers\">{data.time || 'N/A'}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* PM Reading Section - ส่วนแสดงค่า PM หลักและปุ่มคำแนะนำ */}\r\n          <div className=\"flex rounded-lg mb-3 sm:mb-4 shadow-sm overflow-hidden min-h-[140px] sm:min-h-[160px]\">\r\n            {/* ส่วนซ้าย: ค่า PC0.1 หรือ PM0.1 พร้อมหน่วยและ animation */}\r\n            <div\r\n              className=\"w-[50%] sm:w-[45%] p-2 sm:p-3 flex flex-col justify-center relative\"\r\n              style={{ backgroundColor: statusColor }}\r\n            >\r\n              <div className=\"absolute inset-0 bg-black bg-opacity-30\"></div>\r\n              <div className=\"relative z-10 text-center\">\r\n                <div className=\"text-sm sm:text-base lg:text-lg xl:text-xl font-bold mb-2 text-white opacity-90 font-montserrat\">\r\n                  {data.mainReading?.type || 'PC0.1'}\r\n                </div>\r\n                <div className=\"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-semibold text-white mb-2 leading-tight\" style={{ textShadow: '3px 3px 6px rgba(75, 64, 64, 0.8)' }}>\r\n                  <LiveActivityNumber\r\n                    value={data.mainReading?.value || getSafeValue(data.pmReadings, 'PC01')}\r\n                    type=\"cascade-slide\"\r\n                    decimals={0}\r\n                    className=\"text-white\"\r\n                    showChangeIndicator={true}\r\n                    minDigits={1}\r\n                    direction=\"right-to-left\"\r\n                  />\r\n                </div>\r\n                <div className=\"text-sm sm:text-base lg:text-lg xl:text-xl font-semibold text-white opacity-90 font-montserrat\">\r\n                  {data.mainReading?.unit || 'PNC'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ส่วนขวา: ปุ่มคำแนะนำสำหรับกลุ่มต่างๆ */}\r\n            <div\r\n              className=\"w-[50%] sm:w-[55%] flex flex-col\"\r\n              style={{ backgroundColor: statusColor }}\r\n            >\r\n              {/* ปุ่มสำหรับกลุ่มเปราะบาง */}\r\n              <button\r\n                onClick={() => handleRecommendationClick('sensitive')}\r\n                className=\"flex-1 flex items-center gap-2 sm:gap-3 p-2 sm:p-3 transition-all hover:bg-black hover:bg-opacity-10 border-b border-white/20 focus:outline-none focus:bg-black focus:bg-opacity-20\"\r\n                aria-label=\"ดูคำแนะนำสำหรับกลุ่มเปราะบาง\"\r\n              >\r\n                <div className=\"flex-shrink-0 ml-2 sm:ml-4\">\r\n                  <span\r\n                    className=\"material-symbols-outlined text-white drop-shadow-lg\"\r\n                    style={{\r\n                      fontSize: 'clamp(2rem, 4vw, 3rem)',\r\n                      textShadow: '2px 2px 4px rgba(0, 0, 0, 0.5)'\r\n                    }}\r\n                  >\r\n                    shield_person\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex-1 text-center min-w-0\">\r\n                  <div className=\"text-xs sm:text-sm lg:text-xl font-semibold text-white opacity-90 mb-1 font-sarabun\">\r\n                    กลุ่มเปราะบาง\r\n                  </div>\r\n                  <div className=\"text-sm sm:text-base lg:text-xl xl:text-3xl font-bold text-white truncate font-montserrat\" style={{ textShadow: '2px 2px 4px rgba(0, 0, 0, 0.8)' }}>\r\n                    {sensitiveStatus}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex-shrink-0 text-white text-sm sm:text-base opacity-60\">\r\n                  →\r\n                </div>\r\n              </button>\r\n\r\n              {/* ปุ่มสำหรับคนทั่วไป */}\r\n              <button\r\n                onClick={() => handleRecommendationClick('general')}\r\n                className=\"flex-1 flex items-center gap-2 sm:gap-3 p-2 sm:p-3 transition-all hover:bg-black hover:bg-opacity-10 focus:outline-none focus:bg-black focus:bg-opacity-20\"\r\n                aria-label=\"ดูคำแนะนำสำหรับคนทั่วไป\"\r\n              >\r\n                <div className=\"flex-shrink-0 ml-2 sm:ml-4\">\r\n                  <span\r\n                    className=\"material-symbols-outlined text-white drop-shadow-lg\"\r\n                    style={{\r\n                      fontSize: 'clamp(2rem, 4vw, 3rem)',\r\n                      textShadow: '2px 2px 4px rgba(0, 0, 0, 0.5)'\r\n                    }}\r\n                  >\r\n                    person\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex-1 text-center min-w-0\">\r\n                  <div className=\"text-xs sm:text-sm lg:text-xl font-semibold text-white opacity-90 mb-1 font-sarabun\">\r\n                    กลุ่มคนทั่วไป\r\n                  </div>\r\n                  <div className=\"text-sm sm:text-base lg:text-xl xl:text-3xl font-bold text-white truncate font-montserrat\" style={{ textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>\r\n                    {generalStatus}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex-shrink-0 text-white text-sm sm:text-base opacity-60\">\r\n                  →\r\n                </div>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Temperature and Humidity Section - ส่วนแสดงอุณหภูมิและความชื้น */}\r\n          <div className=\"flex justify-center gap-8 sm:gap-12 text-base sm:text-lg lg:text-xl mb-3 sm:mb-4 py-3 sm:py-4 bg-gray-50 rounded-lg\">\r\n            {/* Temperature */}\r\n            <div className=\"flex items-center gap-3 sm:gap-4\">\r\n              <img\r\n                src=\"/assets/images/temperature.png\"\r\n                alt=\"Temperature\"\r\n                className=\"w-8 h-8 sm:w-10 sm:h-10\"\r\n                onError={(e) => {\r\n                  e.target.style.display = 'none';\r\n                  e.target.nextSibling.style.display = 'inline';\r\n                }}\r\n              />\r\n              <Thermometer className=\"w-5 h-5 sm:w-6 sm:h-6 text-gray-500\" style={{ display: 'none' }} />\r\n              <LiveActivityNumber\r\n                value={parseFloat(data.conditions?.temperature?.replace(/[^\\d.-]/g, '')) || 25.5}\r\n                type=\"cascade-slide\"\r\n                decimals={1}\r\n                className=\"text-gray-700 font-medium text-base sm:text-lg lg:text-xl xl:text-2xl\"\r\n                showChangeIndicator={false}\r\n              />\r\n              <span className=\"text-gray-700 font-medium text-base sm:text-lg lg:text-xl xl:text-2xl font-montserrat\">°C</span>\r\n            </div>\r\n\r\n            {/* Humidity */}\r\n            <div className=\"flex items-center gap-3 sm:gap-4\">\r\n              <img\r\n                src=\"/assets/images/humidity.png\"\r\n                alt=\"Humidity\"\r\n                className=\"w-8 h-8 sm:w-10 sm:h-10\"\r\n                onError={(e) => {\r\n                  e.target.style.display = 'none';\r\n                  e.target.nextSibling.style.display = 'inline';\r\n                }}\r\n              />\r\n              <Droplets className=\"w-5 h-5 sm:w-6 sm:h-6 text-gray-500\" style={{ display: 'none' }} />\r\n              <LiveActivityNumber\r\n                value={parseFloat(data.conditions?.humidity?.replace(/[^\\d.-]/g, '')) || 65}\r\n                type=\"cascade-slide\"\r\n                decimals={0}\r\n                className=\"text-gray-700 font-medium text-base sm:text-lg lg:text-xl xl:text-2xl\"\r\n                showChangeIndicator={false}\r\n                direction=\"left-to-right\"\r\n              />\r\n              <span className=\"text-gray-700 font-medium text-base sm:text-lg lg:text-xl xl:text-2xl font-montserrat\">%</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recommendations Icons - ไอคอนแสดงคำแนะนำแบบย่อ */}\r\n          <div className=\"border-t border-gray-100 pt-2 sm:pt-3\">\r\n            <div className=\"text-center\">\r\n              <div className=\"flex justify-center items-center gap-3 sm:gap-4 p-1 flex-wrap\">\r\n                {(data.recommendations || []).slice(0, 5).map((recommendation, index) => {\r\n                  const iconPath = getRecommendationIcon(recommendation);\r\n                  const isImageIcon = typeof iconPath === 'string' && iconPath.startsWith('/assets/images/');\r\n\r\n                  return (\r\n                    <div key={index} className=\"flex flex-col items-center\">\r\n                      {isImageIcon ? (\r\n                        <img\r\n                          src={iconPath}\r\n                          alt=\"\"\r\n                          className=\"w-4 h-4 sm:w-6 sm:h-6 lg:w-7 lg:h-7\"\r\n                          onError={(e) => {\r\n                            e.target.style.display = 'none';\r\n                            e.target.nextSibling.style.display = 'inline';\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        <span className=\"text-sm sm:text-base lg:text-lg\">{iconPath}</span>\r\n                      )}\r\n                      {isImageIcon && (\r\n                        <span style={{ display: 'none' }} className=\"text-sm sm:text-base lg:text-lg\">•</span>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              <div className=\"text-xs sm:text-sm lg:text-base text-gray-500 mt-1 font-sarabun\">\r\n                คลิกที่ bubble สีด้านบนเพื่อดูคำแนะนำสำหรับแต่ละกลุ่ม\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* PM Summary Card - การ์ดแสดงข้อมูล PM2.5 และ PM10 โดยละเอียด */}\r\n        <div className=\"bg-white rounded-lg p-2 sm:p-3 shadow-sm border border-gray-100 mb-2 sm:mb-3\">\r\n          <h3 className=\"text-base sm:text-lg lg:text-xl xl:text-2xl font-medium text-gray-800 mb-2 sm:mb-3 font-sarabun\">ข้อมูลมลพิษทางอากาศ</h3>\r\n          <div className=\"grid grid-cols-2 gap-1 sm:gap-2\">\r\n            {isDataValid ? (\r\n              (() => {\r\n                // กรองเฉพาะ PM2.5 และ PM10 สำหรับแสดงผลในส่วนนี้\r\n                // วิธีการนี้จะค้นหาข้อมูล PM2.5 และ PM10 โดยตรงจาก array ของ readings\r\n                const pm25Reading = data.pmReadings.find(r => r && r.type === 'PM2.5');\r\n                const pm10Reading = data.pmReadings.find(r => r && r.type === 'PM10');\r\n\r\n                // Debug logging เพื่อช่วยในการตรวจสอบข้อมูล\r\n                console.log('=== PM SUMMARY CARD DEBUG ===');\r\n                console.log('All PM Readings:', data.pmReadings);\r\n                console.log('PM2.5 Reading:', pm25Reading);\r\n                console.log('PM10 Reading:', pm10Reading);\r\n                console.log('============================');\r\n\r\n                // สร้าง array ของข้อมูลที่จะแสดง โดยกรองเอาเฉพาะข้อมูลที่มีจริง\r\n                const pmDataToShow = [pm25Reading, pm10Reading].filter(Boolean);\r\n\r\n                return pmDataToShow.length > 0 ? pmDataToShow.map((reading, index) => {\r\n                  // แปลงค่าให้เป็นตัวเลขโดยจัดการกับ data types ต่างๆ\r\n                  let numericValue = 0;\r\n                  if (typeof reading.value === 'number') {\r\n                    numericValue = reading.value;\r\n                  } else if (reading.value !== undefined) {\r\n                    // ลบอักขระที่ไม่ใช่ตัวเลข จุดทศนิยม และเครื่องหมายลบออก\r\n                    numericValue = parseFloat(String(reading.value).replace(/[^\\d.-]/g, '')) || 0;\r\n                  }\r\n\r\n                  // คำนวณสถานะคุณภาพอากาศสำหรับการ์ดแต่ละใบ\r\n                  // การคำนวณนี้จะใช้ข้อมูล PM ทั้งหมดเพื่อให้ได้สถานะที่แม่นยำ\r\n                  const pc01Value = getSafeValue(data.pmReadings, 'PC01');\r\n                  const pm01Value = getSafeValue(data.pmReadings, 'PM0.1');\r\n                  const pm25Value = reading.type === 'PM2.5' ? numericValue : getSafeValue(data.pmReadings, 'PM2.5');\r\n                  const pm10Value = reading.type === 'PM10' ? numericValue : getSafeValue(data.pmReadings, 'PM10');\r\n\r\n                  const status = determineAirQuality(pc01Value, pm01Value, pm25Value, pm10Value);\r\n                  const bgColor = getAirQualityColor(status);\r\n\r\n                  return (\r\n                    <div\r\n                      key={`${reading.type}-${selectedLocation?.id || 'default'}-${index}`}\r\n                      className=\"rounded-lg p-1 sm:p-2 text-white text-center\"\r\n                      style={{ backgroundColor: bgColor }}\r\n                    >\r\n                      <div className=\"text-sm sm:text-base lg:text-lg font-medium mb-1 opacity-90 font-montserrat\">\r\n                        {reading.type}\r\n                      </div>\r\n\r\n                      <div className=\"text-lg sm:text-2xl lg:text-3xl font-bold\" style={{ textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>\r\n                        <LiveActivityNumber\r\n                          value={numericValue}\r\n                          type=\"cascade-slide\"\r\n                          decimals={2}\r\n                          className=\"text-white\"\r\n                          showChangeIndicator={false}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"text-xs sm:text-sm lg:text-base opacity-90 font-montserrat\">\r\n                        μg/m³\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                }) : (\r\n                  <div className=\"col-span-2 text-center text-xs sm:text-sm text-gray-500 py-4 font-sarabun\">\r\n                    ไม่พบข้อมูล PM2.5 และ PM10\r\n                  </div>\r\n                );\r\n              })()\r\n            ) : (\r\n              <div className=\"col-span-2 text-center text-xs sm:text-sm text-gray-500 py-4 font-sarabun\">\r\n                ไม่มีข้อมูลมลพิษในขณะนี้\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n  {/* Air Quality Chevron Bar - แถบแสดงระดับคุณภาพอากาศ */}\r\n  {/* <ChevronAirQualityBar currentStatus={data.mainReading?.status} /> */}\r\n  <SimpleChevronBar />\r\n\r\n  {/* Click instruction - คำแนะนำการใช้งาน\r\n  <div className=\"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n    <div className=\"text-base sm:text-lg lg:text-xl text-yellow-800 font-sarabun\">\r\n      💡 <strong>วิธีใช้:</strong> คลิกที่หมุดบนแผนที่เพื่อดูข้อมูลคุณภาพอากาศของตำแหน่งนั้น\r\n    </div>\r\n  </div> */}\r\n</div>\r\n\r\n      {/* Modal ที่ใช้ Portal เพื่อแก้ปัญหาการซ้อนทับ */}\r\n      {/* การใช้ createPortal จะทำให้ modal render ไปยัง document.body โดยตรง */}\r\n      {/* ซึ่งจะทำให้หลุดออกจาก stacking context ของ parent components */}\r\n      {showRecommendationPopup && createPortal(\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center\"\r\n          style={{\r\n            zIndex: 9999, // z-index สูงมากเพื่อให้แน่ใจว่าจะอยู่บนสุด\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)' // backdrop overlay\r\n          }}\r\n          onClick={closePopup} // ปิด modal เมื่อคลิกที่ backdrop\r\n          role=\"dialog\" // accessibility attribute\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"modal-title\"\r\n        >\r\n          <div\r\n            className=\"bg-white rounded-lg max-w-xl w-full mx-4 max-h-[75vh] overflow-y-auto shadow-2xl\"\r\n            style={{\r\n              zIndex: 10000, // z-index สูงกว่า backdrop เล็กน้อย\r\n              transform: 'translateZ(0)' // สร้าง stacking context ใหม่\r\n            }}\r\n            onClick={(e) => e.stopPropagation()} // ป้องกันการปิด modal เมื่อคลิกใน content\r\n          >\r\n            {/* Header ของ Modal */}\r\n            <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200\">\r\n              <h3\r\n                id=\"modal-title\"\r\n                className=\"text-xl sm:text-2xl lg:text-3xl font-semibold text-gray-800 font-sarabun\"\r\n              >\r\n                คำแนะนำสำหรับ{selectedGroupType === 'sensitive' ? 'กลุ่มเปราะบาง' : 'คนทั่วไป'}\r\n              </h3>\r\n              <button\r\n                onClick={closePopup}\r\n                className=\"text-gray-500 hover:text-gray-700 text-2xl sm:text-3xl font-bold transition-colors duration-200 p-1 rounded-md hover:bg-gray-100\"\r\n                aria-label=\"ปิดหน้าต่าง\"\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n\r\n            {/* Content ของ Modal */}\r\n            <div className=\"p-4 sm:p-6\">\r\n              {/* แสดงตำแหน่ง */}\r\n              <div className=\"mb-4 text-base sm:text-lg lg:text-xl text-gray-600 font-sarabun\">\r\n                📍 {selectedLocation ? selectedLocation.name : data.location || \"Cafe Amazon สาขา ST\"}\r\n              </div>\r\n\r\n              {/* รายการคำแนะนำ */}\r\n              <div className=\"space-y-4\">\r\n                {selectedRecommendations.map((recommendation, index) => {\r\n                  const iconPath = getRecommendationIcon(recommendation);\r\n                  const isImageIcon = typeof iconPath === 'string' && iconPath.startsWith('/assets/images/');\r\n\r\n                  return (\r\n                    <div\r\n                      key={`popup-rec-${index}`}\r\n                      className=\"flex items-center gap-4 p-3 sm:p-4 bg-gray-50 rounded-lg transition-colors duration-200 hover:bg-gray-100\"\r\n                    >\r\n                      {/* ไอคอนของคำแนะนำ */}\r\n                      <span className=\"flex-shrink-0\">\r\n                        {isImageIcon ? (\r\n                          <img\r\n                            src={iconPath}\r\n                            alt=\"\"\r\n                            className=\"w-6 h-6 sm:w-8 sm:h-8\"\r\n                            onError={(e) => {\r\n                              e.target.style.display = 'none';\r\n                              e.target.nextSibling.style.display = 'inline';\r\n                            }}\r\n                          />\r\n                        ) : (\r\n                          <span className=\"text-lg sm:text-xl\">{iconPath}</span>\r\n                        )}\r\n                        {isImageIcon && (\r\n                          <span style={{ display: 'none' }} className=\"text-lg sm:text-xl\">•</span>\r\n                        )}\r\n                      </span>\r\n\r\n                      {/* ข้อความคำแนะนำ */}\r\n                      <span className=\"flex-1 text-sm sm:text-base lg:text-lg text-gray-700 leading-relaxed font-sarabun\">\r\n                        {recommendation}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Footer ของ Modal */}\r\n            <div className=\"px-4 sm:px-6 pb-4 sm:pb-6 border-t border-gray-100\">\r\n              <button\r\n                onClick={closePopup}\r\n                className=\"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg transition-colors duration-200 text-lg sm:text-xl lg:text-2xl font-medium font-sarabun focus:outline-none focus:ring-4 focus:ring-green-300\"\r\n              >\r\n                ปิด\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>,\r\n        document.body // render ไปยัง document.body แทนที่จะอยู่ใน component tree\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ส่วนแสดงแผนที่ (ด้านขวาบน)\r\nconst MapSection = ({ selectedLocation, onLocationSelect }) => {\r\n  return (\r\n    <div className=\"flex-1 p-4 h-full bg-white\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-base sm:text-lg lg:text-xl xl:text-2xl font-medium text-gray-800 mb-2 sm:mb-3 font-sarabun\">แผนที่ตำแหน่งตรวจวัด</h2>\r\n        <div className=\"text-sm text-gray-500 font-sarabun\">\r\n          คลิกที่หมุดเพื่อดูข้อมูล\r\n        </div>\r\n      </div>\r\n\r\n      {/* Map Container - ใช้ MapComponent */}\r\n      <div className=\"w-full h-[calc(100%-60px)] bg-gray-100 rounded-lg border border-gray-200 overflow-hidden\">\r\n        {/* Dynamic import เพื่อหลีกเลี่ยง SSR issues */}\r\n        <MapComponentWrapper onLocationSelect={onLocationSelect} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Wrapper component สำหรับ MapComponent ที่ใช้ dynamic import\r\nconst MapComponentWrapper = ({ onLocationSelect }) => {\r\n  const [MapComponents, setMapComponents] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Dynamic import เพื่อหลีกเลี่ยง SSR issues กับ Leaflet\r\n    import('./MapComponents').then((module) => {\r\n      setMapComponents(() => module.default);\r\n    });\r\n  }, []);\r\n\r\n  if (!MapComponents) {\r\n    return (\r\n      <div className=\"w-full h-full flex items-center justify-center\">\r\n        <div className=\"text-center text-gray-500\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-600 mx-auto mb-2\"></div>\r\n          <p className=\"text-sm font-sarabun\">กำลังโหลดแผนที่...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <MapComponents onLocationSelect={onLocationSelect} />;\r\n};\r\n\r\n// ส่วนแสดงข้อมูล History (ด้านขวาล่าง)\r\nconst HistorySection = ({ selectedLocation }) => {\r\n  const [selectedParameter, setSelectedParameter] = useState('PM2.5');\r\n\r\n  // Mock data สำหรับ History - ในการใช้งานจริงควรดึงจาก Firebase\r\n  const historyData = [\r\n    { time: '15:00', pm01: 19.8, pm25: 31.2, pm10: 58.7, status: 'Moderate' },\r\n    { time: '14:00', pm01: 15.2, pm25: 25.1, pm10: 45.3, status: 'Good' },\r\n    { time: '13:00', pm01: 18.5, pm25: 28.7, pm10: 52.1, status: 'Moderate' },\r\n    { time: '12:00', pm01: 12.8, pm25: 22.3, pm10: 38.9, status: 'Good' },\r\n    { time: '11:00', pm01: 21.3, pm25: 35.2, pm10: 68.4, status: 'Unhealthy for Sensitive Groups' },\r\n    { time: '10:00', pm01: 16.7, pm25: 30.1, pm10: 55.8, status: 'Moderate' },\r\n    { time: '09:00', pm01: 14.2, pm25: 24.6, pm10: 42.1, status: 'Good' },\r\n    { time: '08:00', pm01: 13.5, pm25: 23.8, pm10: 41.2, status: 'Good' },\r\n    { time: '07:00', pm01: 17.1, pm25: 29.4, pm10: 54.3, status: 'Moderate' },\r\n    { time: '06:00', pm01: 22.4, pm25: 37.8, pm10: 72.1, status: 'Unhealthy for Sensitive Groups' },\r\n    { time: '05:00', pm01: 20.3, pm25: 34.6, pm10: 65.9, status: 'Unhealthy for Sensitive Groups' },\r\n    { time: '04:00', pm01: 18.9, pm25: 32.1, pm10: 61.4, status: 'Moderate' },\r\n    { time: '03:00', pm01: 16.1, pm25: 28.9, pm10: 53.7, status: 'Moderate' },\r\n    { time: '02:00', pm01: 19.5, pm25: 33.2, pm10: 62.8, status: 'Moderate' },\r\n    { time: '01:00', pm01: 23.7, pm25: 39.1, pm10: 74.3, status: 'Unhealthy for Sensitive Groups' },\r\n    { time: '00:00', pm01: 21.2, pm25: 36.4, pm10: 69.1, status: 'Unhealthy for Sensitive Groups' },\r\n  ];\r\n\r\n  // เตรียมข้อมูลสำหรับกราฟ\r\n  const chartData = historyData.map(item => ({\r\n    time: item.time,\r\n    value: item[selectedParameter.toLowerCase().replace('.', '')]\r\n  })).reverse(); // ย้อนกลับเพื่อให้เรียงจากเก่าไปใหม่\r\n\r\n  const getMaxValue = () => {\r\n    return Math.max(...chartData.map(d => d.value)) * 1.1;\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full bg-white\">\r\n      {/* Header Section - ไม่เลื่อน */}\r\n      <div className=\"p-4 border-b border-gray-100\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-base sm:text-lg lg:text-xl xl:text-2xl font-medium text-gray-800 font-sarabun\">ข้อมูลย้อนหลัง</h2>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n              <Clock className=\"w-4 h-4\" />\r\n              <span className=\"font-sarabun\">{historyData.length} ชั่วโมงล่าสุด</span>\r\n            </div>\r\n            <Link\r\n              href=\"/history-data\"\r\n              className=\"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm font-sarabun\"\r\n            >\r\n              <BarChart3 className=\"w-4 h-4\" />\r\n              ดูทั้งหมด\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Location indicator */}\r\n        <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n          <div className=\"flex items-center gap-2 text-blue-800\">\r\n            <MapPin className=\"w-4 h-4\" />\r\n            <span className=\"font-sarabun\">\r\n              ตำแหน่ง: {selectedLocation ? selectedLocation.name : \"Cafe Amazon สาขา ST\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Parameter Selector */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-sm font-medium text-gray-700 font-sarabun\">แสดงข้อมูล:</span>\r\n            <select\r\n              value={selectedParameter}\r\n              onChange={(e) => setSelectedParameter(e.target.value)}\r\n              className=\"px-3 py-1 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-sm font-montserrat\"\r\n            >\r\n              <option value=\"PC0.1\">PC0.1</option>\r\n              <option value=\"PM0.1\">PM0.1</option>\r\n              <option value=\"PM2.5\">PM2.5</option>\r\n              <option value=\"PM10\">PM10</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"text-xs text-gray-500 font-sarabun\">\r\n            หน่วย: μg/m³\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Area */}\r\n      <div className=\"p-4\">\r\n        {/* Simple Chart */}\r\n        <div className=\"mb-4 bg-gray-50 rounded-lg p-4 h-40\">\r\n          <div className=\"relative h-full\">\r\n            <svg className=\"w-full h-full\">\r\n              {/* Grid lines */}\r\n              {[0, 25, 50, 75, 100].map((value, index) => (\r\n                <g key={index}>\r\n                  <line\r\n                    x1=\"0\"\r\n                    y1={`${100 - value}%`}\r\n                    x2=\"100%\"\r\n                    y2={`${100 - value}%`}\r\n                    stroke=\"#e5e7eb\"\r\n                    strokeWidth=\"1\"\r\n                    strokeDasharray=\"2,2\"\r\n                  />\r\n                  <text\r\n                    x=\"5\"\r\n                    y={`${100 - value}%`}\r\n                    dy=\"-3\"\r\n                    fontSize=\"10\"\r\n                    fill=\"#6b7280\"\r\n                    className=\"font-numbers\"\r\n                  >\r\n                    {Math.round((getMaxValue() * value) / 100)}\r\n                  </text>\r\n                </g>\r\n              ))}\r\n\r\n              {/* Chart line */}\r\n              <polyline\r\n                fill=\"none\"\r\n                stroke=\"#3b82f6\"\r\n                strokeWidth=\"2\"\r\n                points={chartData.map((d, i) =>\r\n                  `${(i / (chartData.length - 1)) * 100}%,${100 - (d.value / getMaxValue()) * 100}%`\r\n                ).join(' ')}\r\n              />\r\n\r\n              {/* Data points */}\r\n              {chartData.map((d, i) => (\r\n                <g key={i}>\r\n                  <circle\r\n                    cx={`${(i / (chartData.length - 1)) * 100}%`}\r\n                    cy={`${100 - (d.value / getMaxValue()) * 100}%`}\r\n                    r=\"3\"\r\n                    fill=\"#3b82f6\"\r\n                  />\r\n                  {/* แสดง time labels เฉพาะบางจุด เพื่อไม่ให้แออัด */}\r\n                  {i % Math.ceil(chartData.length / 8) === 0 && (\r\n                    <text\r\n                      x={`${(i / (chartData.length - 1)) * 100}%`}\r\n                      y=\"100%\"\r\n                      dy=\"-5\"\r\n                      textAnchor=\"middle\"\r\n                      fontSize=\"10\"\r\n                      fill=\"#6b7280\"\r\n                      className=\"font-numbers\"\r\n                    >\r\n                      {d.time}\r\n                    </text>\r\n                  )}\r\n                </g>\r\n              ))}\r\n            </svg>\r\n          </div>\r\n        </div>\r\n\r\n        {/* History Table - Scrollable */}\r\n        <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden mb-4\">\r\n          <div className=\"max-h-96 overflow-y-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-gray-50 sticky top-0 z-10\">\r\n                <tr>\r\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-700 font-sarabun\">เวลา</th>\r\n                  <th className=\"px-3 py-2 text-center text-xs font-medium text-gray-700 font-montserrat\">PM0.1</th>\r\n                  <th className=\"px-3 py-2 text-center text-xs font-medium text-gray-700 font-montserrat\">PM2.5</th>\r\n                  <th className=\"px-3 py-2 text-center text-xs font-medium text-gray-700 font-montserrat\">PM10</th>\r\n                  <th className=\"px-3 py-2 text-center text-xs font-medium text-gray-700 font-sarabun\">สถานะ</th>\r\n                  <th className=\"px-3 py-2 text-center text-xs font-medium text-gray-700 font-sarabun\">แนวโน้ม</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200\">\r\n                {historyData.map((data, index) => {\r\n                  const statusColor = getAirQualityColor(data.status);\r\n                  const isLatest = index === 0;\r\n                  const prevData = index < historyData.length - 1 ? historyData[index + 1] : null;\r\n                  const trend = prevData ? (data.pm25 > prevData.pm25 ? 'up' : data.pm25 < prevData.pm25 ? 'down' : 'stable') : 'stable';\r\n\r\n                  return (\r\n                    <tr key={`${data.time}-${index}`} className={`hover:bg-gray-50 transition-colors ${isLatest ? 'bg-green-50' : ''}`}>\r\n                      <td className=\"px-3 py-2 text-xs text-gray-900 font-numbers\">\r\n                        {data.time}\r\n                        {isLatest && (\r\n                          <span className=\"ml-1 inline-flex items-center px-1 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 font-sarabun\">\r\n                            ล่าสุด\r\n                          </span>\r\n                        )}\r\n                      </td>\r\n                      <td className=\"px-3 py-2 text-xs text-center font-numbers\">\r\n                        <LiveActivityNumber\r\n                          value={data.pm01}\r\n                          type=\"cascade-slide\"\r\n                          decimals={1}\r\n                          className=\"text-gray-900\"\r\n                          showChangeIndicator={false}\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-3 py-2 text-xs text-center font-numbers\">\r\n                        <LiveActivityNumber\r\n                          value={data.pm25}\r\n                          type=\"cascade-slide\"\r\n                          decimals={1}\r\n                          className=\"text-gray-900\"\r\n                          showChangeIndicator={false}\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-3 py-2 text-xs text-center font-numbers\">\r\n                        <LiveActivityNumber\r\n                          value={data.pm10}\r\n                          type=\"cascade-slide\"\r\n                          decimals={1}\r\n                          className=\"text-gray-900\"\r\n                          showChangeIndicator={false}\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-3 py-2 text-center\">\r\n                        <span\r\n                          className=\"inline-flex items-center px-1 py-0.5 rounded text-xs font-medium text-white font-montserrat\"\r\n                          style={{ backgroundColor: statusColor }}\r\n                        >\r\n                          {data.status === 'Unhealthy for Sensitive Groups' ? 'Unhealthy*' : data.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-3 py-2 text-center\">\r\n                        {trend === 'up' && (\r\n                          <TrendingUp className=\"w-3 h-3 text-red-500 mx-auto\" />\r\n                        )}\r\n                        {trend === 'down' && (\r\n                          <TrendingUp className=\"w-3 h-3 text-green-500 mx-auto transform rotate-180\" />\r\n                        )}\r\n                        {trend === 'stable' && (\r\n                          <div className=\"w-3 h-0.5 bg-gray-400 mx-auto\"></div>\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Stats - สถิติแบบรวดเร็ว */}\r\n        <div className=\"grid grid-cols-3 gap-3 mb-4\">\r\n          <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-3 rounded-lg border border-blue-200\">\r\n            <div className=\"text-xs text-blue-600 font-sarabun\">ค่าเฉลี่ย</div>\r\n            <div className=\"text-lg font-bold text-blue-800 font-numbers\">\r\n              <LiveActivityNumber\r\n                value={historyData.reduce((sum, d) => sum + d[selectedParameter.toLowerCase().replace('.', '')], 0) / historyData.length}\r\n                type=\"cascade-slide\"\r\n                decimals={1}\r\n                className=\"text-blue-800\"\r\n                showChangeIndicator={false}\r\n              />\r\n              <span className=\"ml-1 text-xs font-montserrat\">μg/m³</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-gradient-to-r from-green-50 to-green-100 p-3 rounded-lg border border-green-200\">\r\n            <div className=\"text-xs text-green-600 font-sarabun\">ต่ำสุด</div>\r\n            <div className=\"text-lg font-bold text-green-800 font-numbers\">\r\n              <LiveActivityNumber\r\n                value={Math.min(...historyData.map(d => d[selectedParameter.toLowerCase().replace('.', '')]))}\r\n                type=\"cascade-slide\"\r\n                decimals={1}\r\n                className=\"text-green-800\"\r\n                showChangeIndicator={false}\r\n              />\r\n              <span className=\"ml-1 text-xs font-montserrat\">μg/m³</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-gradient-to-r from-orange-50 to-orange-100 p-3 rounded-lg border border-orange-200\">\r\n            <div className=\"text-xs text-orange-600 font-sarabun\">สูงสุด</div>\r\n            <div className=\"text-lg font-bold text-orange-800 font-numbers\">\r\n              <LiveActivityNumber\r\n                value={Math.max(...historyData.map(d => d[selectedParameter.toLowerCase().replace('.', '')]))}\r\n                type=\"cascade-slide\"\r\n                decimals={1}\r\n                className=\"text-orange-800\"\r\n                showChangeIndicator={false}\r\n              />\r\n              <span className=\"ml-1 text-xs font-montserrat\">μg/m³</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Data Info */}\r\n        <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4\">\r\n          <div className=\"text-sm text-blue-800 font-sarabun\">\r\n            💡 <strong>การใช้งาน:</strong> เลื่อนตารางเพื่อดูข้อมูลย้อนหลัง หรือเลือก Parameter ที่ต้องการดูในกราฟและสถิติ\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Export all components ให้สามารถนำไปใช้ในไฟล์อื่นได้\r\nconst SimpleChevronBar = () => {\r\n  const levels = [\r\n    { label: 'Good', color: '#2DC653', thai: 'ดี' },\r\n    { label: 'Warning', color: '#FECF3E', thai: 'ปานกลาง' },\r\n    { label: 'Affect health', color: '#FF9500', thai: 'มีผลต่อสุขภาพ' },\r\n    { label: 'Danger', color: '#D02224', thai: 'อันตราย' },\r\n    { label: 'Hazardous', color: '#973AA8', thai: 'เป็นอันตรายร้ายแรง' }\r\n  ];\r\n\r\n  const chevronWidth = 130; // ขยายความกว้างแต่ละบาร์\r\n  const chevronHeight = 50;\r\n  const svgWidth = chevronWidth * levels.length;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg p-3 sm:p-4 shadow-sm border border-gray-100 mb-3 sm:mb-4\">\r\n      <h3 className=\"text-base sm:text-lg lg:text-2xl font-medium text-gray-800 mb-3 font-sarabun\">\r\n        ระดับคุณภาพอากาศ\r\n      </h3>\r\n      <div className=\"relative mb-3\">\r\n        <svg viewBox={`0 0 ${svgWidth} ${chevronHeight}`} className=\"w-full h-12 sm:h-14\">\r\n          {levels.map((level, index) => {\r\n            const x = index * chevronWidth;\r\n            return (\r\n              <g key={level.label}>\r\n                <path\r\n                  d={`M ${x} 5 \r\n          L ${x + chevronWidth - 10} 5 \r\n          L ${x + chevronWidth} 25 \r\n          L ${x + chevronWidth - 10} 45 \r\n          L ${x} 45 \r\n          ${index > 0 ? `L ${x + 10} 25` : `L ${x} 25`} \r\n          Z`}\r\n                  fill={level.color}\r\n                  stroke=\"rgba(255,255,255,0.5)\"\r\n                  strokeWidth=\"1\"\r\n                />\r\n                <text\r\n                  x={x + chevronWidth / 2}\r\n                  y=\"28\"\r\n                  textAnchor=\"middle\"\r\n                  fill=\"white\"\r\n                  fontSize=\"15\"\r\n                  fontWeight=\"600\"\r\n                  className=\"font-montserrat\"\r\n                  style={{ textShadow: '1px 1px 1px rgba(0,0,0,0.8)' }}\r\n                >\r\n                  {level.label}\r\n                </text>\r\n              </g>\r\n            );\r\n          })}\r\n        </svg>\r\n      </div>\r\n      {/* ป้ายกำกับภาษาไทย */}\r\n      <div className=\"grid grid-cols-5 gap-1 text-center\">\r\n        {levels.map((level) => (\r\n          <div\r\n            key={`simple-${level.label}`}\r\n            className=\"text-base sm:text-lg font-sarabun text-gray-700 break-words\"\r\n            style={{ minWidth: 0, wordBreak: 'break-word' }}\r\n          >\r\n            {level.thai}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Footer Component - ส่วนท้ายของหน้าเว็บ\r\nconst Footer = () => (\r\n  <footer className=\"h-18 sm:h-20 bg-green-100 border-t border-green-100 flex-shrink-0 flex items-center justify-between p-4 sm:p-6\">\r\n    <span className=\"text-base sm:text-lg lg:text-xl xl:text-2xl text-black font-montserrat\">Created by Jaejae Dream Yok ❤️</span>\r\n    <div className=\"flex items-center gap-4 sm:gap-6\">\r\n      <div className=\"flex-shrink-0 flex items-center justify-center\">\r\n        <img\r\n          src=\"/assets/images/logo.png\"\r\n          alt=\"Mupcop logo\"\r\n          className=\"w-20 h-20 sm:w-24 sm:h-24 object-contain\"\r\n          width={96}\r\n          height={96}\r\n        />\r\n      </div>\r\n      <div>\r\n        <p className=\"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-black font-montserrat\">Mupcop</p>\r\n      </div>\r\n    </div>\r\n  </footer>\r\n);\r\n\r\nexport {\r\n  Header,\r\n  MonitoringPanel,\r\n  MapSection,\r\n  HistorySection,\r\n  SimpleChevronBar,\r\n  Footer\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3919, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3925, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/okero/Desktop/GITHUB/CurrentWeb/src/components/ClientWrapper.js"],"sourcesContent":["// src/components/ClientWrapper.js - Fixed version\r\n'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport dynamic from 'next/dynamic'\r\n\r\n// Dynamically import MapComponent to avoid SSR issues\r\n// แก้ไข path ให้ถูกต้อง - ใช้ MapComponent แทน MapComponents\r\nconst MapComponent = dynamic(() => import('./MapComponents'), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100\">\r\n      <div className=\"text-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4 mx-auto\"></div>\r\n        <p className=\"text-lg font-sarabun text-gray-600\">กำลังโหลดแผนที่...</p>\r\n        <p className=\"text-sm font-sarabun text-gray-500 mt-2\">กรุณารอสักครู่</p>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport function ClientWrapper({ onLocationSelect }) {\r\n  const [isClient, setIsClient] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setIsClient(true)\r\n  }, [])\r\n\r\n  const handleLocationSelect = (locationData) => {\r\n    console.log('=== CLIENT WRAPPER DEBUG ===');\r\n    console.log('Location selected in ClientWrapper:', locationData);\r\n    console.log('Location ID:', locationData?.id);\r\n    console.log('Location Name:', locationData?.name);\r\n    console.log('onLocationSelect function exists:', !!onLocationSelect);\r\n    console.log('============================');\r\n\r\n    if (onLocationSelect && typeof onLocationSelect === 'function') {\r\n      onLocationSelect(locationData);\r\n    }\r\n  };\r\n\r\n  if (!isClient) {\r\n    return (\r\n      <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4 mx-auto\"></div>\r\n          <p className=\"text-lg font-sarabun text-gray-600\">กำลังเตรียมแผนที่...</p>\r\n          <p className=\"text-sm font-sarabun text-gray-500 mt-2\">กำลังตรวจสอบสภาพแวดล้อม</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"absolute inset-0\">\r\n      <MapComponent onLocationSelect={handleLocationSelect} />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAGlD;AACA;;;AAHA;;;AAKA,sDAAsD;AACtD,6DAA6D;AAC7D,MAAM,eAAe,CAAA,GAAA,kKAAA,CAAA,UAAO,AAAD,EAAE;;;;;;IAC3B,KAAK;IACL,SAAS,kBACP,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAqC;;;;;;kCAClD,6LAAC;wBAAE,WAAU;kCAA0C;;;;;;;;;;;;;;;;;;KAPzD;AAaC,SAAS,cAAc,EAAE,gBAAgB,EAAE;;IAChD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,YAAY;QACd;kCAAG,EAAE;IAEL,MAAM,uBAAuB,CAAC;QAC5B,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,uCAAuC;QACnD,QAAQ,GAAG,CAAC,gBAAgB,cAAc;QAC1C,QAAQ,GAAG,CAAC,kBAAkB,cAAc;QAC5C,QAAQ,GAAG,CAAC,qCAAqC,CAAC,CAAC;QACnD,QAAQ,GAAG,CAAC;QAEZ,IAAI,oBAAoB,OAAO,qBAAqB,YAAY;YAC9D,iBAAiB;QACnB;IACF;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAqC;;;;;;kCAClD,6LAAC;wBAAE,WAAU;kCAA0C;;;;;;;;;;;;;;;;;IAI/D;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAa,kBAAkB;;;;;;;;;;;AAGtC;GArCgB;MAAA"}},
    {"offset": {"line": 4070, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4076, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/okero/Desktop/GITHUB/CurrentWeb/src/app/page.js"],"sourcesContent":["'use client'\r\n\r\n// src/app/page.js - แก้ไขให้ UFPs Panel sticky ด้านซ้าย\r\nimport { useState } from 'react';\r\nimport { Header, MonitoringPanel, MapSection, HistorySection, Footer } from '../components/MonitoringInterface'\r\nimport { ClientWrapper } from '../components/ClientWrapper'\r\n\r\nexport default function Home() {\r\n  const [selectedLocation, setSelectedLocation] = useState(null);\r\n\r\n  const handleLocationSelect = (locationData) => {\r\n    console.log('=== PAGE.JS DEBUG ===');\r\n    console.log('Location selected in page.js:', locationData);\r\n    console.log('Location ID:', locationData?.id);\r\n    console.log('Location Name:', locationData?.name);\r\n    console.log('Has rawDataPath:', !!locationData?.rawDataPath);\r\n    console.log('Full locationData:', locationData);\r\n    console.log('==================');\r\n    setSelectedLocation(locationData);\r\n  };\r\n\r\n  const handleLocationClear = () => {\r\n    console.log('Location cleared in page.js');\r\n    setSelectedLocation(null);\r\n  };\r\n\r\n  console.log('Page.js current selectedLocation:', selectedLocation);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n\r\n      {/* Main Content - UFPs Panel sticky ด้านซ้าย, ส่วนขวาเลื่อนได้ */}\r\n      <main className=\"flex-1 flex\">\r\n        {/* Left Panel - UFPs Monitoring - Sticky */}\r\n        <div className=\"w-full lg:w-1/3 lg:sticky lg:top-0 lg:h-screen lg:overflow-y-auto border-r border-gray-100 bg-white\">\r\n          <MonitoringPanel\r\n            selectedLocation={selectedLocation}\r\n            onLocationClear={handleLocationClear}\r\n          />\r\n        </div>\r\n\r\n        {/* Right Side - Map + History - Scrollable */}\r\n        <div className=\"flex-1 flex flex-col min-w-0\">\r\n          {/* MapSection - กำหนดความสูงขั้นต่ำ */}\r\n          <div className=\"min-h-[400px] lg:min-h-[500px]\">\r\n            <MapSection\r\n              selectedLocation={selectedLocation}\r\n              onLocationSelect={handleLocationSelect}\r\n            />\r\n          </div>\r\n\r\n          {/* HistorySection - ขยายตามเนื้อหา */}\r\n          <div className=\"min-h-[600px]\">\r\n            <HistorySection\r\n              selectedLocation={selectedLocation}\r\n            />\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAEA,wDAAwD;AACxD;AACA;AACA;;;AALA;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,MAAM,uBAAuB,CAAC;QAC5B,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,iCAAiC;QAC7C,QAAQ,GAAG,CAAC,gBAAgB,cAAc;QAC1C,QAAQ,GAAG,CAAC,kBAAkB,cAAc;QAC5C,QAAQ,GAAG,CAAC,oBAAoB,CAAC,CAAC,cAAc;QAChD,QAAQ,GAAG,CAAC,sBAAsB;QAClC,QAAQ,GAAG,CAAC;QACZ,oBAAoB;IACtB;IAEA,MAAM,sBAAsB;QAC1B,QAAQ,GAAG,CAAC;QACZ,oBAAoB;IACtB;IAEA,QAAQ,GAAG,CAAC,qCAAqC;IAEjD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2IAAA,CAAA,SAAM;;;;;0BAGP,6LAAC;gBAAK,WAAU;;kCAEd,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,2IAAA,CAAA,kBAAe;4BACd,kBAAkB;4BAClB,iBAAiB;;;;;;;;;;;kCAKrB,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,2IAAA,CAAA,aAAU;oCACT,kBAAkB;oCAClB,kBAAkB;;;;;;;;;;;0CAKtB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,2IAAA,CAAA,iBAAc;oCACb,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;0BAM1B,6LAAC,2IAAA,CAAA,SAAM;;;;;;;;;;;AAGb;GAzDwB;KAAA"}},
    {"offset": {"line": 4197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}